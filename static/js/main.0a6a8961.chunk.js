(this["webpackJsonpguitar-diagram-gif-generator"]=this["webpackJsonpguitar-diagram-gif-generator"]||[]).push([[0],{154:function(a,e,t){},174:function(a,e){},232:function(a,e,t){"use strict";t.r(e);var r,i,s=t(0),n=t.n(s),o=t(43),c=t.n(o),l=(t(154),t(12)),d=t(7),h=t(20),g=t(21),m=t(3),u=t(280),f=t(281),p=t(277),b=t(2),j=g.a.div(r||(r=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  padding: 30px;\n"]))),v=g.a.div(i||(i=Object(h.a)(["\n  display: flex;\n  gap: 15px;\n"])));var y,P=function(a){var e=a.diagramConfiguration,t=a.setDiagramConfiguration,r=function(a,r){t(Object(l.a)(Object(l.a)({},e),{},Object(m.a)({},r,a)))},i=function(a,r){t(Object(l.a)(Object(l.a)({},e),{},Object(m.a)({},r,a)))},s=function(a,r){t(Object(l.a)(Object(l.a)({},e),{},Object(m.a)({},r,a)))};return Object(b.jsxs)(j,{children:[Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Width",variant:"standard",defaultValue:e.width,onBlur:function(a){return r(parseInt(a.target.value),"width")}}),Object(b.jsx)(p.a,{label:"Height",variant:"standard",defaultValue:e.height,onBlur:function(a){return r(parseInt(a.target.value),"height")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"# of Strings",variant:"standard",defaultValue:e.numOfStrings,onBlur:function(a){return r(parseInt(a.target.value),"numOfStrings")}}),Object(b.jsx)(p.a,{label:"# of Frets",variant:"standard",defaultValue:e.numOfFrets,onBlur:function(a){return r(parseInt(a.target.value),"numOfFrets")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"String Width",variant:"standard",defaultValue:e.stringWidth,onBlur:function(a){return r(parseInt(a.target.value),"stringWidth")}}),Object(b.jsx)(p.a,{label:"Frets Width",variant:"standard",defaultValue:e.fretsWidth,onBlur:function(a){return r(parseInt(a.target.value),"fretsWidth")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Animation Duration",variant:"standard",defaultValue:e.animationDuration,onBlur:function(a){return r(parseInt(a.target.value),"animationDuration")}}),Object(b.jsx)(p.a,{label:"Force Start Position",variant:"standard",defaultValue:e.forcePosition,onBlur:function(a){return r(parseInt(a.target.value),"forcePosition")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:e.showFretsLabels,onChange:function(a){return i(a.target.checked,"showFretsLabels")}}),label:"Show Fret Labels"}),Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:e.showBridgeLabel,onChange:function(a){return i(a.target.checked,"showBridgeLabel")}}),label:"Show Bridge Labels"})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:e.showFingerLabels,onChange:function(a){return i(a.target.checked,"showFingerLabels")}}),label:"Show Finger Label"}),Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:e.showOpenStringsLabels,onChange:function(a){return i(a.target.checked,"showOpenStringsLabels")}}),label:"Show Open Strings Labels"})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:e.showTuning,onChange:function(a){return i(a.target.checked,"showTuning")}}),label:"Show Tuning"}),Object(b.jsx)(p.a,{label:"Tuning",variant:"standard",defaultValue:e.tuning,onBlur:function(a){return r=a.target.value,i="tuning",void t(Object(l.a)(Object(l.a)({},e),{},Object(m.a)({},i,r.split(","))));var r,i}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Default Color",variant:"standard",defaultValue:e.defaultColor,onBlur:function(a){return s(a.target.value,"defaultColor")}}),Object(b.jsx)(p.a,{label:"Bridge Color",variant:"standard",defaultValue:e.bridgeColor,onBlur:function(a){return s(a.target.value,"bridgeColor")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"String Color",variant:"standard",defaultValue:e.stringColor,onBlur:function(a){return s(a.target.value,"stringColor")}}),Object(b.jsx)(p.a,{label:"Fret Color",variant:"standard",defaultValue:e.fretColor,onBlur:function(a){return s(a.target.value,"fretColor")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Text Color",variant:"standard",defaultValue:e.textColor,onBlur:function(a){return s(a.target.value,"textColor")}}),Object(b.jsx)(p.a,{label:"Label Color",variant:"standard",defaultValue:e.labelColor,onBlur:function(a){return s(a.target.value,"labelColor")}})]}),Object(b.jsx)(v,{children:Object(b.jsx)(p.a,{label:"Background Color",variant:"standard",defaultValue:e.backgroundColor,onBlur:function(a){return s(a.target.value,"backgroundColor")}})}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Font Family",variant:"standard",defaultValue:e.fontFamily,onBlur:function(a){return s(a.target.value,"fontFamily")}}),Object(b.jsx)(p.a,{label:"Font Size",variant:"standard",defaultValue:e.fontSize,onBlur:function(a){return r(parseInt(a.target.value),"fontSize")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Font Style",variant:"standard",defaultValue:e.fontStyle,onBlur:function(a){return s(a.target.value,"fontStyle")}}),Object(b.jsx)(p.a,{label:"Font Weight",variant:"standard",defaultValue:e.fontWeight,onBlur:function(a){return r(parseInt(a.target.value),"fontWeight")}})]})]})},S=t(19),O=g.a.div(y||(y=Object(h.a)(["\n  padding: 20px;\n  display: flex;\n  gap: 20px;\n  align-items: center;\n  justify-content: space-between;\n"])));var x,C,k,w,L=function(a){var e=Object(s.useState)(a.chord),t=Object(d.a)(e,2),r=t[0],i=t[1];return Object(b.jsx)(O,{children:Object(b.jsx)(p.a,{label:"Chord ".concat(a.index+1),variant:"standard",value:r,onChange:function(a){return i(a.target.value)},onBlur:function(){return a.onChange(r,a.index)}})})},T=g.a.button(x||(x=Object(h.a)(["\n  padding: 5px;\n  align-self: flex-end;\n  background-color: #ffffff;\n"]))),B=g.a.div(C||(C=Object(h.a)(["\n  position: sticky;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent, #eeeeee 30%);\n  padding: 30px 20px 20px;\n  display: flex;\n  justify-content: flex-end;\n"]))),F=g.a.div(k||(k=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n"]))),M=Object(g.a)(p.a)(w||(w=Object(h.a)(["\n  background-color: rgba(25, 118, 210, 0.1);\n"])));var D,W,z,A=function(a){var e=function(e,t){var r=Object(S.a)(a.chords);r[t]=e,a.setChords(r)},t=function(e){var t=Object(S.a)(a.chords);t.splice(e,1),a.setChords(t)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(F,{children:Object(b.jsx)(M,{label:"Chord Sequence Text Input",value:a.chords.join(" "),onChange:function(e){a.setChords(""===e.target.value?[""]:e.target.value.split(" "))}})}),a.chords.map((function(a,r){return Object(b.jsx)(L,{index:r,chord:a,onChange:e,removeChord:t},"".concat(r,"_").concat(a))})),Object(b.jsx)(B,{children:Object(b.jsx)(T,{onClick:function(){a.setChords([].concat(Object(S.a)(a.chords),[""]))},children:"+Add Chord"})})]})},I=t(279),V=t(285),E=t(284),Y=g.a.div(D||(D=Object(h.a)(["\n  background-color: #eeeeee;\n  flex-grow: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow-y: auto;\n"])),(function(a){return a.hidden?0:1})),N=Object(g.a)(E.a)(W||(W=Object(h.a)(["\n  padding: 0;\n  width: 100%;\n"])));function G(a){var e=a.children,t=a.value,r=a.index;return Object(b.jsx)(Y,{role:"tabpanel",hidden:t!==r,children:t===r&&Object(b.jsx)(N,{children:e})})}var H=Object(g.a)(E.a)(z||(z=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"])));var R,U=function(a){var e=a.tabs,t=n.a.useState(0),r=Object(d.a)(t,2),i=r[0],s=r[1];return Object(b.jsxs)(H,{children:[Object(b.jsx)(E.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(b.jsx)(I.a,{variant:"fullWidth",value:i,onChange:function(a,e){s(e)},children:e.map((function(a,e){return Object(b.jsx)(V.a,{label:a.title},e)}))})}),e.map((function(a,e){return Object(b.jsx)(G,{value:i,index:e,children:a.content},e)}))]})},q=g.a.div(R||(R=Object(h.a)(["\n  height: 100%;\n  width: 30vw;\n"])));var J=function(a){return Object(b.jsx)(q,{children:Object(b.jsx)(U,{tabs:[{title:"Diagram Configuration",content:Object(b.jsx)(P,{diagramConfiguration:a.diagramConfiguration,setDiagramConfiguration:a.setDiagramConfiguration})},{title:"Chords Sequencer",content:Object(b.jsx)(A,{chords:a.chords,setChords:a.setChords})}]})})},X=t(138),Z=t(10),_=t(15),K=t(136),Q=["strings","frets","layers"],$={width:500,height:600,numOfStrings:6,numOfFrets:5,stringWidth:1,fretsWidth:1,showTuning:!0,showFretsLabels:!1,showBridgeLabel:!1,showFingerLabels:!0,showOpenStringsLabels:!1,tuning:["E","A","D","G","B","E"],defaultColor:"#666666",fingersLabelColor:"#ffffff",backgroundColor:"#ffffff",animationDuration:500,forcePosition:0},aa=function(){function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Z.a)(this,a),this.draw=void 0,this.params=$,this.elements={},this.calcedParams={},this.currentTitle=1,this.params=Object(l.a)(Object(l.a)({},this.params),t),this.draw=Object(K.a)().addTo(e).size(this.params.width,this.params.height),this.calcedParams.width=.75*this.params.width,this.calcedParams.height=.75*this.params.height,this.calcedParams.stringSpacing=this.calcedParams.width/this.params.numOfStrings,this.calcedParams.fretSpacing=this.calcedParams.height/(this.params.numOfFrets+2),this.calcedParams.origin={x:.15*this.params.width+this.calcedParams.stringSpacing/2,y:.15*this.params.height+this.calcedParams.fretSpacing},this.calcedParams.bridgeStrokeWidth=Math.ceil(this.calcedParams.height/36),this.calcedParams.animationDuration=this.params.animationDuration||500;var r=this.params.fontSize||Math.ceil(this.calcedParams.width/20),i=Math.max(this.calcedParams.stringSpacing/2,this.calcedParams.fretSpacing/2);this.calcedParams.fontSize=r>i?i:r}return Object(_.a)(a,[{key:"drawText",value:function(a,e,t,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},n=Object(l.a)({family:this.params.fontFamily||'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',size:this.calcedParams.fontSize,style:this.params.fontStyle,weight:this.params.fontWeight||"100",opacity:1},s),o=a.text(r).stroke(i||this.params.defaultColor).fill(i||this.params.defaultColor).font(n);return o.move(e-o.length()/2,t)}},{key:"drawLine",value:function(a,e,t,r,i){return a.line(0,0,r-e,i-t).move(e,t)}},{key:"drawCircle",value:function(a,e,t,r){return a.circle(e).move(t,r)}},{key:"drawPointAt",value:function(a,e){this.draw.circle(4,4).fill("red").move(a-2,e-2)}},{key:"printParams",value:function(){console.log("Calced Params:"),console.table(this.calcedParams);var a=this.elements,e=a.strings,t=a.frets,r=a.layers,i=Object(X.a)(a,Q);console.log("Strings:"),console.table(e),console.log("Frets:"),console.table(t),console.log("Layers:"),console.table(r),console.log("Other Elements:"),console.table(i)}},{key:"debug",value:function(a){var e=this;a.forEach((function(a,t){console.log("debug point ".concat(t+1,": ").concat(a[0],", ").concat(a[1])),e.drawPointAt(a[0],a[1])}))}},{key:"drawBaseDiagram",value:function(){var a=this,e=this.draw.group().attr({id:"baseDiagram"});this.elements.layers={baseDiagram:e,background:e.group().attr({id:"background"}),strings:e.group().attr({id:"strings"}),frets:e.group().attr({id:"frets"}),fretsCover:e.group().attr({id:"fretsCover"}),bridge:e.group().attr({id:"bridge"}),bridgeCover:e.group().attr({id:"bridgeCover"}),fretLabels:e.group().attr({id:"fretLabels"}),fretLabelsCover:e.group().attr({id:"fretLabelsCover"}),stringsLabels:e.group().attr({id:"stringsLabels"}),barres:e.group().attr({id:"barres"}),fingers:e.group().attr({id:"fingers"}),stringMarkings:e.group().attr({id:"stringMarkings"}),chordTitle1:e.group().attr({id:"chordTitle1"}),chordTitle2:e.group().attr({id:"chordTitle2"})};var t=this.draw.gradient("linear",(function(e){e.stop(0,a.params.backgroundColor),e.stop(.9,a.params.backgroundColor),e.stop(1,a.params.backgroundColor,0)})).rotate(90),r=(this.draw.gradient("linear",(function(a){a.stop(0,"rgba(255,0,0)",.5),a.stop(.9,"rgba(255,0,0)",.5),a.stop(1,"rgba(0,255,0)",.5)})).rotate(90),this.draw.gradient("linear",(function(e){e.stop(0,a.params.backgroundColor,0),e.stop(.1,a.params.backgroundColor),e.stop(1,a.params.backgroundColor)})).rotate(90)),i=(this.draw.gradient("linear",(function(a){a.stop(0,"rgba(0,255,0)",.5),a.stop(.1,"rgba(255,0,0)",.5),a.stop(1,"rgba(255,0,0)",.5)})).rotate(90),this.calcedParams.stringSpacing*(this.params.numOfStrings-1)+this.params.stringWidth),s=this.calcedParams.origin.x-this.params.fretsWidth/2,n=this.calcedParams.origin.x-this.params.fretsWidth/2,o=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-this.calcedParams.fontSize/2;this.elements.background={node:this.elements.layers.background.rect(this.params.width,this.params.height).stroke({width:0}).fill(this.params.backgroundColor)};var c=this.calcedParams.origin.x-this.params.stringWidth/2,l=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,h=this.calcedParams.origin.y-l,g=this.calcedParams.origin.x-this.calcedParams.fontSize/1.7-this.calcedParams.stringSpacing/4;this.elements.bridge={node:this.elements.layers.bridge.rect(i,h).move(c,l).stroke({width:0}).fill(this.params.bridgeColor||this.params.defaultColor),label:this.drawText(this.elements.layers.fretLabels,g,this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-.7*this.calcedParams.fontSize,"B",this.params.textColor,{opacity:this.params.showBridgeLabel?1:0})};var m=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth;this.elements.bridgeCover={node:this.elements.layers.bridgeCover.rect(i,m).move(s,0).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.frets=[];for(var u=0;u<25;u+=1){var f=this.calcedParams.origin.y+this.calcedParams.fretSpacing*u;this.elements.frets[u]={node:this.drawLine(this.elements.layers.frets,this.calcedParams.origin.x,f,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-1),f).stroke({width:this.params.fretsWidth,color:this.params.fretColor||this.params.defaultColor}),label:0===u?null:this.drawText(this.elements.layers.fretLabels,g,f-this.calcedParams.fretSpacing/2-.75*this.calcedParams.fontSize,u.toString(),this.params.textColor,{opacity:1!==u||this.params.showFretsLabels?1:0})}}var p=this.calcedParams.origin.y-this.params.fretsWidth/2;this.elements.fretsCoverTop={node:this.elements.layers.fretsCover.rect(i,p).move(s,0).stroke({width:0}).fill(this.params.backgroundColor)};var b=this.params.height-this.calcedParams.height+this.params.fretsWidth,j=this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+this.params.fretsWidth/2;this.elements.fretsCoverBottom={node:this.elements.layers.fretsCover.rect(this.params.width,b).move(0,j).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.fretsLabelCoverTop={node:this.elements.layers.fretLabelsCover.rect(n,o+this.calcedParams.fontSize/2.5).stroke({width:0}).fill(t)},this.elements.fretsLabelCoverBottom={node:this.elements.layers.fretLabelsCover.rect(n,o+this.calcedParams.fontSize).move(0,j-1.3*this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.params.showFretsLabels||(this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(n,o).move(0,this.calcedParams.origin.y+2*this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(n,this.calcedParams.height).move(0,this.calcedParams.origin.y+o).stroke({width:0}).fill(this.params.backgroundColor)}),this.elements.strings=[];for(var v=0;v<this.params.numOfStrings;v+=1)this.elements.strings[v]={node:this.drawLine(this.elements.layers.strings,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets).stroke({width:this.params.stringWidth,color:this.params.stringColor||this.params.defaultColor}),label:this.drawText(this.elements.layers.stringsLabels,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+10,this.params.tuning[v],this.params.textColor,{opacity:this.params.showTuning?1:0})};this.elements.fingers=[],this.elements.barres=[];for(var y=1;y<5;y+=1){var P=this.getFingerBasePosition(y),S=Object(d.a)(P,2),O=S[0],x=S[1],C="barre"+y;this.elements.layers[C]=this.elements.layers.barres.group().attr({id:C}).opacity(0),this.elements.barres[y]={node:this.drawLine(this.elements.layers[C],O+this.calcedParams.stringSpacing/4,x+this.calcedParams.fretSpacing/4,O+this.calcedParams.stringSpacing/4,x+this.calcedParams.fretSpacing/4).stroke({width:this.calcedParams.fretSpacing/2,color:this.params.fingersColor||this.params.defaultColor,linecap:"round"}),label:null};var k="finger"+y;this.elements.layers[k]=this.elements.layers.fingers.group().attr({id:k}).opacity(0),this.elements.fingers[y]={node:this.drawCircle(this.elements.layers[k],this.calcedParams.fretSpacing/2,O,x).fill(this.params.fingersColor||this.params.defaultColor),label:this.drawText(this.elements.layers[k],O+this.calcedParams.fretSpacing/3.9,this.calcedParams.origin.y+this.calcedParams.fretSpacing*(y-1)+this.calcedParams.fretSpacing/3.2,y.toString(),this.params.fingersLabelColor,{size:this.calcedParams.fretSpacing/3.4,opacity:this.params.showFingerLabels?1:0})}}this.elements.openStringMarkins=[],this.elements.mutedStringMarkings=[];for(var w=1;w<=this.params.numOfStrings;w+=1){var L="openStringMarking"+w;this.elements.layers[L]=this.elements.layers.stringMarkings.group().attr({id:L}).opacity(0),this.elements.openStringMarkins[w]={node:this.drawCircle(this.elements.layers[L],this.calcedParams.fretSpacing/3,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(w-1)-this.calcedParams.fretSpacing/6,this.getOpenStringMarkingBaseYPosition()).stroke(this.params.defaultColor).fill(this.params.backgroundColor),label:this.drawText(this.elements.layers[L],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(w-1),this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.95*this.calcedParams.fretSpacing,this.params.tuning[w-1],this.params.defaultColor,{size:this.calcedParams.fretSpacing/5,opacity:this.params.showOpenStringsLabels?1:0})};var T="mutedStringMarking"+w;this.elements.layers[T]=this.elements.layers.stringMarkings.group().attr({id:T}).opacity(0),this.elements.mutedStringMarkings[w]={node:null,label:this.drawText(this.elements.layers[T],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(w-1),this.getMutedStringMarkingBaseYPosition(),"X",this.params.defaultColor,{size:this.calcedParams.fretSpacing/3})}}this.elements.stringMarkingCover={node:this.elements.layers.stringMarkings.rect(this.params.width,this.calcedParams.origin.y-.75*this.calcedParams.stringSpacing).stroke({width:0}).fill(this.params.backgroundColor)},this.moveDiagramToFret(0),this.params.debugMode&&this.printParams()}},{key:"getOpenStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-this.calcedParams.fretSpacing}},{key:"getMutedStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-1.05*this.calcedParams.fretSpacing}},{key:"getFingerBasePosition",value:function(a){return[this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-.5),this.calcedParams.origin.y+this.calcedParams.fretSpacing*(a-1)+this.calcedParams.fretSpacing/4]}},{key:"getFingerChordPosition",value:function(a,e){var t,r=e.string,i=e.fret,s=Array.isArray(r)?r[0]:r,n=a<=1?0:1,o=n+(void 0!==this.params.forcePosition&&!isNaN(this.params.forcePosition)?n-this.params.forcePosition:0),c=this.calcedParams.origin.x+(this.params.numOfStrings-s-.25)*this.calcedParams.stringSpacing,l=this.calcedParams.origin.y+(i-a+o-.75)*this.calcedParams.fretSpacing;return Array.isArray(r)&&r[1]&&(t=this.calcedParams.stringSpacing*(r[0]-r[1])+this.calcedParams.stringSpacing/4),[c,l,t]}},{key:"moveDiagramToFret",value:function(a,e){var t=25-this.params.numOfFrets,r=a<=1?0:a;if(r>t)console.error("Max fret allowed as start position is ".concat(t));else{var i=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,s=this.calcedParams.origin.y-.9*this.calcedParams.fontSize;e?(this.elements.layers.bridge.animate(this.calcedParams.animationDuration).y(i-this.calcedParams.fretSpacing*r),this.elements.layers.frets.animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*r),this.elements.layers.fretLabels.animate(this.calcedParams.animationDuration).y(s-this.calcedParams.fretSpacing*r)):(this.elements.layers.bridge.y(i-this.calcedParams.fretSpacing*r),this.elements.layers.frets.y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*r),this.elements.layers.fretLabels.y(s-this.calcedParams.fretSpacing*r))}}},{key:"drawChord",value:function(a,e,t){var r=this;console.log(a),(void 0===this.params.forcePosition||isNaN(this.params.forcePosition))&&this.moveDiagramToFret(a.position,t);for(var i=function(e){var i=a.fingers.find((function(a){return a.index===e}));if(i){var s=r.getFingerChordPosition(a.position,i),n=Object(d.a)(s,3),o=n[0],c=n[1],l=n[2];t?(r.elements.layers["finger"+e].animate(r.calcedParams.animationDuration).move(o,c).opacity(1),l?(r.elements.layers["barre"+e].animate(r.calcedParams.animationDuration).move(o+r.calcedParams.stringSpacing/4,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[e].node.animate(r.calcedParams.animationDuration).attr({x1:o+l})):(r.elements.layers["barre"+e].animate(r.calcedParams.animationDuration).move(o,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[e].node.animate(r.calcedParams.animationDuration).attr({x1:o+r.calcedParams.fretSpacing/4,x2:o+r.calcedParams.fretSpacing/4}))):(r.elements.layers["finger"+e].move(o,c).opacity(1),l&&(r.elements.layers["barre"+e].move(o+r.calcedParams.stringSpacing/4,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[e].node.attr({x1:o+l})))}else{var h=r.getFingerBasePosition(e),g=Object(d.a)(h,2),m=g[0],u=g[1];t?(r.elements.layers["finger"+e].animate(r.calcedParams.animationDuration).move(m,u).opacity(0),r.elements.layers["barre"+e].animate(r.calcedParams.animationDuration).move(m+r.calcedParams.stringSpacing/4,u+r.calcedParams.fretSpacing/4).opacity(0)):(r.elements.layers["finger"+e].move(m,u).opacity(0),r.elements.layers["barre"+e].move(m+r.calcedParams.stringSpacing/4,u+r.calcedParams.fretSpacing/4).opacity(0))}},s=1;s<5;s++)i(s);for(var n=1;n<=this.params.numOfStrings;n++)a.mutedStrings.includes(this.params.numOfStrings-n+1)?t?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["mutedStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):t?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getMutedStringMarkingBaseYPosition()).opacity(0):this.elements.layers["mutedStringMarking"+n].y(this.getMutedStringMarkingBaseYPosition()).opacity(0),a.openStrings.includes(this.params.numOfStrings-n+1)?t?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["openStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):t?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getOpenStringMarkingBaseYPosition()).opacity(0):this.elements.layers["openStringMarking"+n].y(this.getOpenStringMarkingBaseYPosition()).opacity(0);this.moveOldTitle(this.currentTitle),this.currentTitle=this.currentTitle%2+1,this.drawChordTitle(e,this.currentTitle,t)}},{key:"moveOldTitle",value:function(a,e){var t=this;this.elements.layers["chordTitle"+a].animate(this.calcedParams.animationDuration/2).x(-this.calcedParams.width/4).opacity(0),setTimeout((function(){t.elements.layers["chordTitle"+a].opacity(1).x(0).clear()}),this.calcedParams.animationDuration/2)}},{key:"drawChordTitle",value:function(a,e,t){this.elements.layers["chordTitle"+e].opacity(1),t?(this.elements["chordTitle"+e]=this.drawText(this.elements.layers["chordTitle"+e],this.params.width,this.calcedParams.origin.y/5,a,this.params.defaultColor,{size:3*this.calcedParams.fontSize}).attr({opacity:0}),this.elements["chordTitle"+e].animate(this.calcedParams.animationDuration/2).x(this.params.width/2-this.elements["chordTitle"+e].length()/2).attr({opacity:1})):this.elements["chordTitle"+e]=this.drawText(this.elements.layers["chordTitle"+e],this.params.width/2,this.calcedParams.origin.y/5,a,this.params.defaultColor,{size:3*this.calcedParams.fontSize})}}]),a}(),ea=t(134),ta=function(a,e){var t=Array.isArray(a.string)?a.string[0]:a.string,r=Array.isArray(e.string)?e.string[0]:e.string;return a.fret===e.fret?r-t:a.fret-e.fret};var ra,ia,sa,na=t(283),oa=g.a.div(ra||(ra=Object(h.a)(["\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),ca=g.a.div(ia||(ia=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  padding: 20px;\n"]))),la=g.a.div(sa||(sa=Object(h.a)(["\n  ","\n"])),(function(a){return a.debugMode?"border: 1px solid red;":null}));var da=function(a){var e=Object(s.useRef)(null),t=Object(s.useRef)(null),r=Object(s.useState)(0),i=Object(d.a)(r,2),n=i[0],o=i[1],c=a.chords[n];Object(s.useEffect)((function(){e.current&&(e.current.innerHTML="",t.current=new aa("#main-chord-diagram-wrapper",a.diagramConfiguration)),t.current&&t.current.drawBaseDiagram()}),[a.diagramConfiguration]),Object(s.useEffect)((function(){if(null!==t.current){var a=function(a){var e=Object(ea.findGuitarChord)(a);if(!e)return null;var t=e.fingerings[0],r=t.positions,i=t.barre,s=[],n=[1,2,3,4,5,6],o=[],c=null,d=null;r.reverse().forEach((function(a){var e=a.fret,t=a.stringIndex,r=6-t;i&&i.fret===e&&!c&&(d=i.fret,r=c=[6-i.stringIndices[0],6-i.stringIndices[i.stringIndices.length-1]]),0===e?s.push(6-t):o.push({index:0,string:r,fret:e}),n.includes(6-t)&&n.splice(n.indexOf(6-t),1)}));var h=o.filter((function(a){return!c||d!==a.fret||Array.isArray(a.string)&&d===a.fret&&c[0]===a.string[0]})).sort(ta).map((function(a,e){return Object(l.a)(Object(l.a)({},a),{},{index:e+1})})),g=Math.min.apply(Math,Object(S.a)(o.map((function(a){return a.fret}))));return{fingers:h,position:1===g?0:g,mutedStrings:n,openStrings:s}}(c);a&&t.current.drawChord(a,c,!0)}}),[c]);var h=function(e){n+e<0?o(a.chords.length-1):n+e===a.chords.length?o(0):o(n+e)};return Object(b.jsxs)(oa,{children:[Object(b.jsx)(la,{id:"main-chord-diagram-wrapper",ref:e,debugMode:a.diagramConfiguration.debugMode}),Object(b.jsxs)(ca,{children:[Object(b.jsx)(na.a,{onClick:function(){return h(-1)},children:"<-- Previous Chord"}),Object(b.jsx)(na.a,{onClick:function(){return h(1)},children:"Next Chord --\x3e"})]})]})};var ha,ga=function(a){var e=function(a){for(var e=0,t=[];e<a.length;){var r=a[e];if("|"!==r)if(/\s/.test(r))e++;else if(":"!==r){"."===r&&t.push({type:"dot",value:"."});var i=/[a-zA-Z0-9#-+()]/i;if(!i.test(r))throw new TypeError("I dont know what this character is: "+r);for(var s="";i.test(r);)s+=r,r=a[++e];t.push({type:"chord",value:s})}else e++;else"|"===a[e+1]?(t.push({type:"double barline",value:"||"}),e++):t.push({type:"barline",value:"|"}),e++}return t}(a),t=function(a){var e=0;function t(){var r=a[e];if("chord"===r.type)return e++,{type:"chord",value:r.value};if("double barline"===r.type){var i={type:"Section",content:[]};for(r=a[++e];"double barline"!==r.type;)i.content.push(t()),r=a[e];return e++,i}if("barline"===r.type){r=a[++e];for(var s={type:"bar",chords:[]};"barline"!==r.type;)s.chords.push(t()),r=a[e];return a[e+1]||++e,s}throw new TypeError("Couldn'd recognize token type \"".concat(r.type,'""'))}for(var r={type:"Chart",body:[]};e<a.length;)r.body.push(t());return r}(e);return console.log(t),t.body.filter((function(a){return"bar"===a.type})).flatMap((function(a){return a.chords.map((function(a){return a.value}))}))},ma=t(135),ua=t.n(ma),fa=g.a.div(ha||(ha=Object(h.a)(["\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n"])));var pa=function(){var a=Object(s.useState)(["C","Cmaj7","C7","F","F/E","D","G","Amin","A-maj7","Am7","A-6","F","Eb","G","C"]),e=Object(d.a)(a,2),t=e[0],r=e[1];try{ga("|"+t.join(" ")+"|").map((function(a){return ua()(a,{pascalCase:!0})}))}catch(h){console.error("can't parse chords")}var i=Object(s.useState)(Object(l.a)(Object(l.a)({},$),{},{debugMode:!1})),n=Object(d.a)(i,2),o=n[0],c=n[1];return Object(b.jsxs)(fa,{children:[Object(b.jsx)(J,{chords:t,setChords:r,diagramConfiguration:o,setDiagramConfiguration:c}),Object(b.jsx)(da,{diagramConfiguration:o,chords:t})]})},ba=function(a){a&&a instanceof Function&&t.e(3).then(t.bind(null,286)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,s=e.getLCP,n=e.getTTFB;t(a),r(a),i(a),s(a),n(a)}))};t(228),t(229),t(230),t(231);c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(pa,{})}),document.getElementById("root")),ba()}},[[232,1,2]]]);
//# sourceMappingURL=main.0a6a8961.chunk.js.map