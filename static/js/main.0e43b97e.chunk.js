(this["webpackJsonpguitar-diagram-gif-generator"]=this["webpackJsonpguitar-diagram-gif-generator"]||[]).push([[0],{154:function(e,a,t){},174:function(e,a){},232:function(e,a,t){"use strict";t.r(a);var r,i,s=t(0),n=t.n(s),o=t(43),c=t.n(o),l=(t(154),t(15)),d=t(7),h=t(20),g=t(21),m=t(3),u=t(280),f=t(281),p=t(277),b=t(1),j=g.a.div(r||(r=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  padding: 30px;\n"]))),v=g.a.div(i||(i=Object(h.a)(["\n  display: flex;\n  gap: 15px;\n"])));var y,P,O,x,S,C=function(e){var a=e.diagramConfiguration,t=e.setDiagramConfiguration,r=function(e,r){t(Object(l.a)(Object(l.a)({},a),{},Object(m.a)({},r,e)))},i=function(e,r){t(Object(l.a)(Object(l.a)({},a),{},Object(m.a)({},r,e)))},s=function(e,r){t(Object(l.a)(Object(l.a)({},a),{},Object(m.a)({},r,e)))};return Object(b.jsxs)(j,{children:[Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Width",variant:"standard",defaultValue:a.width,onBlur:function(e){return r(parseInt(e.target.value),"width")}}),Object(b.jsx)(p.a,{label:"Height",variant:"standard",defaultValue:a.height,onBlur:function(e){return r(parseInt(e.target.value),"height")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"# of Strings",variant:"standard",defaultValue:a.numOfStrings,onBlur:function(e){return r(parseInt(e.target.value),"numOfStrings")}}),Object(b.jsx)(p.a,{label:"# of Frets",variant:"standard",defaultValue:a.numOfFrets,onBlur:function(e){return r(parseInt(e.target.value),"numOfFrets")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"String Width",variant:"standard",defaultValue:a.stringWidth,onBlur:function(e){return r(parseInt(e.target.value),"stringWidth")}}),Object(b.jsx)(p.a,{label:"Frets Width",variant:"standard",defaultValue:a.fretsWidth,onBlur:function(e){return r(parseInt(e.target.value),"fretsWidth")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Animation Duration",variant:"standard",defaultValue:a.animationDuration,onBlur:function(e){return r(parseInt(e.target.value),"animationDuration")}}),Object(b.jsx)(p.a,{label:"Force Start Position",variant:"standard",defaultValue:a.forcePosition,onBlur:function(e){return r(parseInt(e.target.value),"forcePosition")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:a.showFretsLabels,onChange:function(e){return i(e.target.checked,"showFretsLabels")}}),label:"Show Fret Labels"}),Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:a.showBridgeLabel,onChange:function(e){return i(e.target.checked,"showBridgeLabel")}}),label:"Show Bridge Labels"})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:a.showFingerLabels,onChange:function(e){return i(e.target.checked,"showFingerLabels")}}),label:"Show Finger Label"}),Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:a.showOpenStringsLabels,onChange:function(e){return i(e.target.checked,"showOpenStringsLabels")}}),label:"Show Open Strings Labels"})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(u.a,{control:Object(b.jsx)(f.a,{checked:a.showTuning,onChange:function(e){return i(e.target.checked,"showTuning")}}),label:"Show Tuning"}),Object(b.jsx)(p.a,{label:"Tuning",variant:"standard",defaultValue:a.tuning,onBlur:function(e){return r=e.target.value,i="tuning",void t(Object(l.a)(Object(l.a)({},a),{},Object(m.a)({},i,r.split(","))));var r,i}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Default Color",variant:"standard",defaultValue:a.defaultColor,onBlur:function(e){return s(e.target.value,"defaultColor")}}),Object(b.jsx)(p.a,{label:"Bridge Color",variant:"standard",defaultValue:a.bridgeColor,onBlur:function(e){return s(e.target.value,"bridgeColor")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"String Color",variant:"standard",defaultValue:a.stringColor,onBlur:function(e){return s(e.target.value,"stringColor")}}),Object(b.jsx)(p.a,{label:"Fret Color",variant:"standard",defaultValue:a.fretColor,onBlur:function(e){return s(e.target.value,"fretColor")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Text Color",variant:"standard",defaultValue:a.textColor,onBlur:function(e){return s(e.target.value,"textColor")}}),Object(b.jsx)(p.a,{label:"Label Color",variant:"standard",defaultValue:a.labelColor,onBlur:function(e){return s(e.target.value,"labelColor")}})]}),Object(b.jsx)(v,{children:Object(b.jsx)(p.a,{label:"Background Color",variant:"standard",defaultValue:a.backgroundColor,onBlur:function(e){return s(e.target.value,"backgroundColor")}})}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Font Family",variant:"standard",defaultValue:a.fontFamily,onBlur:function(e){return s(e.target.value,"fontFamily")}}),Object(b.jsx)(p.a,{label:"Font Size",variant:"standard",defaultValue:a.fontSize,onBlur:function(e){return r(parseInt(e.target.value),"fontSize")}})]}),Object(b.jsxs)(v,{children:[Object(b.jsx)(p.a,{label:"Font Style",variant:"standard",defaultValue:a.fontStyle,onBlur:function(e){return s(e.target.value,"fontStyle")}}),Object(b.jsx)(p.a,{label:"Font Weight",variant:"standard",defaultValue:a.fontWeight,onBlur:function(e){return r(parseInt(e.target.value),"fontWeight")}})]})]})},w=t(19),k=g.a.div(y||(y=Object(h.a)(["\n  padding: 20px;\n  display: flex;\n  gap: 20px;\n  align-items: center;\n  justify-content: space-between;\n"])));g.a.div(P||(P=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),g.a.select(O||(O=Object(h.a)(["\n  width: ","px;\n  padding: 5px;\n"])),(function(e){return e.width})),g.a.button(x||(x=Object(h.a)(["\n  background-color: #ffffff;\n  padding: 2px 7px;\n"]))),g.a.div(S||(S=Object(h.a)(["\n  min-width: 100px;\n  min-height: 120px;\n  ","\n"])),(function(e){return e.debugMode?"border: 1px solid red;":null}));var T,L,B=function(e){var a=Object(s.useState)(e.chord),t=Object(d.a)(a,2),r=t[0],i=t[1];return Object(b.jsx)(k,{children:Object(b.jsx)(p.a,{label:"Chord ".concat(e.index+1),variant:"standard",value:r,onChange:function(e){return i(e.target.value)},onBlur:function(){return e.onChange(r,e.index)}})})},F=g.a.button(T||(T=Object(h.a)(["\n  padding: 5px;\n  align-self: flex-end;\n  background-color: #ffffff;\n"]))),M=g.a.div(L||(L=Object(h.a)(["\n  position: sticky;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent, #eeeeee 30%);\n  padding: 30px 20px 20px;\n  display: flex;\n  justify-content: flex-end;\n"])));var D,W,z,V=function(e){var a=function(a,t){var r=Object(w.a)(e.chords);r[t]=a,e.setChords(r)},t=function(a){var t=Object(w.a)(e.chords);t.splice(a,1),e.setChords(t)};return Object(b.jsxs)(b.Fragment,{children:[e.chords.map((function(e,r){return Object(b.jsx)(B,{index:r,chord:e,onChange:a,removeChord:t},r)})),Object(b.jsx)(M,{children:Object(b.jsx)(F,{onClick:function(){e.setChords([].concat(Object(w.a)(e.chords),[""]))},children:"+Add Chord"})})]})},I=t(279),A=t(285),E=t(284),Y=g.a.div(D||(D=Object(h.a)(["\n  background-color: #eeeeee;\n  flex-grow: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow-y: auto;\n"])),(function(e){return e.hidden?0:1})),H=Object(g.a)(E.a)(W||(W=Object(h.a)(["\n  padding: 0;\n  width: 100%;\n"])));function N(e){var a=e.children,t=e.value,r=e.index;return Object(b.jsx)(Y,{role:"tabpanel",hidden:t!==r,children:t===r&&Object(b.jsx)(H,{children:a})})}var R=Object(g.a)(E.a)(z||(z=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"])));var U,G=function(e){var a=e.tabs,t=n.a.useState(0),r=Object(d.a)(t,2),i=r[0],s=r[1];return Object(b.jsxs)(R,{children:[Object(b.jsx)(E.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(b.jsx)(I.a,{variant:"fullWidth",value:i,onChange:function(e,a){s(a)},children:a.map((function(e,a){return Object(b.jsx)(A.a,{label:e.title},a)}))})}),a.map((function(e,a){return Object(b.jsx)(N,{value:i,index:a,children:e.content},a)}))]})},J=g.a.div(U||(U=Object(h.a)(["\n  height: 100%;\n  width: 30vw;\n"])));var q=function(e){return Object(b.jsx)(J,{children:Object(b.jsx)(G,{tabs:[{title:"Diagram Configuration",content:Object(b.jsx)(C,{diagramConfiguration:e.diagramConfiguration,setDiagramConfiguration:e.setDiagramConfiguration})},{title:"Chords Sequence",content:Object(b.jsx)(V,{chords:e.chords,setChords:e.setChords})}]})})},X=t(137),Z=t(10),K=t(14),Q=t(135),$=["strings","frets","layers"],_={width:500,height:600,numOfStrings:6,numOfFrets:5,stringWidth:1,fretsWidth:1,showTuning:!0,showFretsLabels:!1,showBridgeLabel:!1,showFingerLabels:!1,showOpenStringsLabels:!1,tuning:["E","A","D","G","B","E"],defaultColor:"#666666",fingersLabelColor:"#ffffff",backgroundColor:"#ffffff",animationDuration:500,forcePosition:0},ee=function(){function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Z.a)(this,e),this.draw=void 0,this.params=_,this.elements={},this.calcedParams={},this.currentTitle=1,this.params=Object(l.a)(Object(l.a)({},this.params),t),this.draw=Object(Q.a)().addTo(a).size(this.params.width,this.params.height),this.calcedParams.width=.75*this.params.width,this.calcedParams.height=.75*this.params.height,this.calcedParams.stringSpacing=this.calcedParams.width/this.params.numOfStrings,this.calcedParams.fretSpacing=this.calcedParams.height/(this.params.numOfFrets+2),this.calcedParams.origin={x:.15*this.params.width+this.calcedParams.stringSpacing/2,y:.15*this.params.height+this.calcedParams.fretSpacing},this.calcedParams.bridgeStrokeWidth=Math.ceil(this.calcedParams.height/36),this.calcedParams.animationDuration=this.params.animationDuration||500;var r=this.params.fontSize||Math.ceil(this.calcedParams.width/20),i=Math.max(this.calcedParams.stringSpacing/2,this.calcedParams.fretSpacing/2);this.calcedParams.fontSize=r>i?i:r}return Object(K.a)(e,[{key:"drawText",value:function(e,a,t,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},n=Object(l.a)({family:this.params.fontFamily||'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',size:this.calcedParams.fontSize,style:this.params.fontStyle,weight:this.params.fontWeight||"100",opacity:1},s),o=e.text(r).stroke(i||this.params.defaultColor).fill(i||this.params.defaultColor).font(n);return o.move(a-o.length()/2,t)}},{key:"drawLine",value:function(e,a,t,r,i){return e.line(0,0,r-a,i-t).move(a,t)}},{key:"drawCircle",value:function(e,a,t,r){return e.circle(a).move(t,r)}},{key:"drawPointAt",value:function(e,a){this.draw.circle(4,4).fill("red").move(e-2,a-2)}},{key:"printParams",value:function(){console.log("Calced Params:"),console.table(this.calcedParams);var e=this.elements,a=e.strings,t=e.frets,r=e.layers,i=Object(X.a)(e,$);console.log("Strings:"),console.table(a),console.log("Frets:"),console.table(t),console.log("Layers:"),console.table(r),console.log("Other Elements:"),console.table(i)}},{key:"debug",value:function(e){var a=this;e.forEach((function(e,t){console.log("debug point ".concat(t+1,": ").concat(e[0],", ").concat(e[1])),a.drawPointAt(e[0],e[1])}))}},{key:"drawBaseDiagram",value:function(){var e=this,a=this.draw.group().attr({id:"baseDiagram"});this.elements.layers={baseDiagram:a,background:a.group().attr({id:"background"}),strings:a.group().attr({id:"strings"}),frets:a.group().attr({id:"frets"}),fretsCover:a.group().attr({id:"fretsCover"}),bridge:a.group().attr({id:"bridge"}),bridgeCover:a.group().attr({id:"bridgeCover"}),fretLabels:a.group().attr({id:"fretLabels"}),fretLabelsCover:a.group().attr({id:"fretLabelsCover"}),stringsLabels:a.group().attr({id:"stringsLabels"}),barres:a.group().attr({id:"barres"}),fingers:a.group().attr({id:"fingers"}),stringMarkings:a.group().attr({id:"stringMarkings"}),chordTitle1:a.group().attr({id:"chordTitle1"}),chordTitle2:a.group().attr({id:"chordTitle2"})};var t=this.draw.gradient("linear",(function(a){a.stop(0,e.params.backgroundColor),a.stop(.9,e.params.backgroundColor),a.stop(1,e.params.backgroundColor,0)})).rotate(90),r=(this.draw.gradient("linear",(function(e){e.stop(0,"rgba(255,0,0)",.5),e.stop(.9,"rgba(255,0,0)",.5),e.stop(1,"rgba(0,255,0)",.5)})).rotate(90),this.draw.gradient("linear",(function(a){a.stop(0,e.params.backgroundColor,0),a.stop(.1,e.params.backgroundColor),a.stop(1,e.params.backgroundColor)})).rotate(90)),i=(this.draw.gradient("linear",(function(e){e.stop(0,"rgba(0,255,0)",.5),e.stop(.1,"rgba(255,0,0)",.5),e.stop(1,"rgba(255,0,0)",.5)})).rotate(90),this.calcedParams.stringSpacing*(this.params.numOfStrings-1)+this.params.stringWidth),s=this.calcedParams.origin.x-this.params.fretsWidth/2,n=this.calcedParams.origin.x-this.params.fretsWidth/2,o=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-this.calcedParams.fontSize/2;this.elements.background={node:this.elements.layers.background.rect(this.params.width,this.params.height).stroke({width:0}).fill(this.params.backgroundColor)};var c=this.calcedParams.origin.x-this.params.stringWidth/2,l=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,h=this.calcedParams.origin.y-l,g=this.calcedParams.origin.x-this.calcedParams.fontSize/1.7-this.calcedParams.stringSpacing/4;this.elements.bridge={node:this.elements.layers.bridge.rect(i,h).move(c,l).stroke({width:0}).fill(this.params.bridgeColor||this.params.defaultColor),label:this.drawText(this.elements.layers.fretLabels,g,this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-.7*this.calcedParams.fontSize,"B",this.params.textColor,{opacity:this.params.showBridgeLabel?1:0})};var m=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth;this.elements.bridgeCover={node:this.elements.layers.bridgeCover.rect(i,m).move(s,0).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.frets=[];for(var u=0;u<25;u+=1){var f=this.calcedParams.origin.y+this.calcedParams.fretSpacing*u;this.elements.frets[u]={node:this.drawLine(this.elements.layers.frets,this.calcedParams.origin.x,f,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-1),f).stroke({width:this.params.fretsWidth,color:this.params.fretColor||this.params.defaultColor}),label:0===u?null:this.drawText(this.elements.layers.fretLabels,g,f-this.params.fretsWidth/2-.7*this.calcedParams.fontSize,u.toString(),this.params.textColor)}}var p=this.calcedParams.origin.y-this.params.fretsWidth/2;this.elements.fretsCoverTop={node:this.elements.layers.fretsCover.rect(i,p).move(s,0).stroke({width:0}).fill(this.params.backgroundColor)};var b=this.params.height-this.calcedParams.height+this.params.fretsWidth,j=this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+this.params.fretsWidth/2;this.elements.fretsCoverBottom={node:this.elements.layers.fretsCover.rect(this.params.width,b).move(0,j).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.fretsLabelCoverTop={node:this.elements.layers.fretLabelsCover.rect(n,o).stroke({width:0}).fill(t)},this.elements.fretsLabelCoverBottom={node:this.elements.layers.fretLabelsCover.rect(n,o+this.calcedParams.fontSize).move(0,j-1.3*this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.params.showFretsLabels||(this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(n,o).move(0,this.calcedParams.origin.y+this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(n,this.calcedParams.height).move(0,this.calcedParams.origin.y+o).stroke({width:0}).fill(this.params.backgroundColor)}),this.elements.strings=[];for(var v=0;v<this.params.numOfStrings;v+=1)this.elements.strings[v]={node:this.drawLine(this.elements.layers.strings,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets).stroke({width:this.params.stringWidth,color:this.params.stringColor||this.params.defaultColor}),label:this.drawText(this.elements.layers.stringsLabels,this.calcedParams.origin.x+this.calcedParams.stringSpacing*v,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+10,this.params.tuning[v],this.params.textColor,{opacity:this.params.showTuning?1:0})};this.elements.fingers=[],this.elements.barres=[];for(var y=1;y<5;y+=1){var P=this.getFingerBasePosition(y),O=Object(d.a)(P,2),x=O[0],S=O[1],C="barre"+y;this.elements.layers[C]=this.elements.layers.barres.group().attr({id:C}).opacity(0),this.elements.barres[y]={node:this.drawLine(this.elements.layers[C],x+this.calcedParams.stringSpacing/4,S+this.calcedParams.fretSpacing/4,x+this.calcedParams.stringSpacing/4,S+this.calcedParams.fretSpacing/4).stroke({width:this.calcedParams.fretSpacing/2,color:this.params.fingersColor||this.params.defaultColor,linecap:"round"}),label:null};var w="finger"+y;this.elements.layers[w]=this.elements.layers.fingers.group().attr({id:w}).opacity(0),this.elements.fingers[y]={node:this.drawCircle(this.elements.layers[w],this.calcedParams.fretSpacing/2,x,S).fill(this.params.fingersColor||this.params.defaultColor),label:this.drawText(this.elements.layers[w],x+this.calcedParams.fretSpacing/3.9,this.calcedParams.origin.y+this.calcedParams.fretSpacing*(y-1)+this.calcedParams.fretSpacing/3.2,y.toString(),this.params.fingersLabelColor,{size:this.calcedParams.fretSpacing/3.4,opacity:this.params.showFingerLabels?1:0})}}this.elements.stringsMarkings=[];for(var k=1;k<=this.params.numOfStrings;k+=1){var T="openStringMarking"+k;this.elements.layers[T]=this.elements.layers.stringMarkings.group().attr({id:T}).opacity(0),this.elements.fingers[k]={node:this.drawCircle(this.elements.layers[T],this.calcedParams.fretSpacing/3,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1)-this.calcedParams.fretSpacing/6,this.getOpenStringMarkingBaseYPosition()).stroke(this.params.defaultColor).fill(this.params.backgroundColor),label:this.drawText(this.elements.layers[T],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1),this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.95*this.calcedParams.fretSpacing,this.params.tuning[k-1],this.params.defaultColor,{size:this.calcedParams.fretSpacing/5,opacity:this.params.showOpenStringsLabels?1:0})};var L="mutedStringMarking"+k;this.elements.layers[L]=this.elements.layers.fingers.group().attr({id:L}).opacity(0),this.elements.fingers[k]={node:null,label:this.drawText(this.elements.layers[L],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1),this.getMutedStringMarkingBaseYPosition(),"X",this.params.defaultColor,{size:this.calcedParams.fretSpacing/3})}}this.moveDiagramToFret(0),this.params.debugMode&&this.printParams()}},{key:"getOpenStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-this.calcedParams.fretSpacing}},{key:"getMutedStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-1.05*this.calcedParams.fretSpacing}},{key:"getFingerBasePosition",value:function(e){return[this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-.5),this.calcedParams.origin.y+this.calcedParams.fretSpacing*(e-1)+this.calcedParams.fretSpacing/4]}},{key:"getFingerChordPosition",value:function(e,a){var t,r=a.string,i=a.fret,s=Array.isArray(r)?r[0]:r,n=0===e?0:1,o=this.params.forcePosition||0===this.params.forcePosition?n-this.params.forcePosition:0,c=this.calcedParams.origin.x+(this.params.numOfStrings-s-.25)*this.calcedParams.stringSpacing,l=this.calcedParams.origin.y+(i-e+n+o-.75)*this.calcedParams.fretSpacing;return Array.isArray(r)&&r[1]&&(t=this.calcedParams.stringSpacing*(r[0]-r[1])+this.calcedParams.stringSpacing/4),[c,l,t]}},{key:"moveDiagramToFret",value:function(e,a){var t=25-this.params.numOfFrets;if(e>t)console.error("Max fret allowed as start position is ".concat(t));else{var r=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,i=this.calcedParams.origin.y-.9*this.calcedParams.fontSize;a?(this.elements.layers.bridge.animate(this.calcedParams.animationDuration).y(r-this.calcedParams.fretSpacing*e),this.elements.layers.frets.animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*e),this.elements.layers.fretLabels.animate(this.calcedParams.animationDuration).y(i-this.calcedParams.fretSpacing*e)):(this.elements.layers.bridge.y(r-this.calcedParams.fretSpacing*e),this.elements.layers.frets.y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*e),this.elements.layers.fretLabels.y(i-this.calcedParams.fretSpacing*e))}}},{key:"drawChord",value:function(e,a,t){var r=this;(void 0===this.params.forcePosition||isNaN(this.params.forcePosition))&&this.moveDiagramToFret(e.position,t);for(var i=function(a){var i=e.fingers.find((function(e){return e.index===a}));if(i){var s=r.getFingerChordPosition(e.position,i),n=Object(d.a)(s,3),o=n[0],c=n[1],l=n[2];t?(r.elements.layers["finger"+a].animate(r.calcedParams.animationDuration).move(o,c).opacity(1),l?(r.elements.layers["barre"+a].animate(r.calcedParams.animationDuration).move(o+r.calcedParams.stringSpacing/4,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[a].node.animate(r.calcedParams.animationDuration).attr({x1:o+l})):(r.elements.layers["barre"+a].animate(r.calcedParams.animationDuration).move(o,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[a].node.animate(r.calcedParams.animationDuration).attr({x1:o+r.calcedParams.fretSpacing/4,x2:o+r.calcedParams.fretSpacing/4}))):(r.elements.layers["finger"+a].move(o,c).opacity(1),l&&(r.elements.layers["barre"+a].move(o+r.calcedParams.stringSpacing/4,c+r.calcedParams.fretSpacing/4).opacity(1),r.elements.barres[a].node.attr({x1:o+l})))}else{var h=r.getFingerBasePosition(a),g=Object(d.a)(h,2),m=g[0],u=g[1];t?(r.elements.layers["finger"+a].animate(r.calcedParams.animationDuration).move(m,u).opacity(0),r.elements.layers["barre"+a].animate(r.calcedParams.animationDuration).move(m+r.calcedParams.stringSpacing/4,u+r.calcedParams.fretSpacing/4).opacity(0)):(r.elements.layers["finger"+a].move(m,u).opacity(0),r.elements.layers["barre"+a].move(m+r.calcedParams.stringSpacing/4,u+r.calcedParams.fretSpacing/4).opacity(0))}},s=1;s<5;s++)i(s);for(var n=1;n<=this.params.numOfStrings;n++)e.mutedStrings.includes(this.params.numOfStrings-n+1)?t?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["mutedStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):t?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getMutedStringMarkingBaseYPosition()).opacity(0):this.elements.layers["mutedStringMarking"+n].y(this.getMutedStringMarkingBaseYPosition()).opacity(0),e.openStrings.includes(this.params.numOfStrings-n+1)?t?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["openStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):t?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getOpenStringMarkingBaseYPosition()).opacity(0):this.elements.layers["openStringMarking"+n].y(this.getOpenStringMarkingBaseYPosition()).opacity(0);this.moveOldTitle(this.currentTitle),this.currentTitle=this.currentTitle%2+1,this.drawChordTitle(a,this.currentTitle,t)}},{key:"moveOldTitle",value:function(e,a){var t=this;this.elements.layers["chordTitle"+e].animate(this.calcedParams.animationDuration/2).x(-this.calcedParams.width/4).opacity(0),setTimeout((function(){t.elements.layers["chordTitle"+e].clear(),t.elements.layers["chordTitle"+e].opacity(1).x(0).clear()}),this.calcedParams.animationDuration/2)}},{key:"drawChordTitle",value:function(e,a,t){t?(this.elements["chordTitle"+a]=this.drawText(this.elements.layers["chordTitle"+a],this.params.width,this.calcedParams.origin.y/5,e,this.params.defaultColor,{size:3*this.calcedParams.fontSize}).attr({opacity:0}),this.elements["chordTitle"+a].animate(this.calcedParams.animationDuration/2).x(this.params.width/2).attr({opacity:1})):this.elements["chordTitle"+a]=this.drawText(this.elements.layers["chordTitle"+a],this.params.width/2,this.calcedParams.origin.y/5,e,this.params.defaultColor,{size:3*this.calcedParams.fontSize})}}]),e}(),ae=t(133);var te,re,ie,se=t(283),ne=g.a.div(te||(te=Object(h.a)(["\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),oe=g.a.div(re||(re=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  padding: 20px;\n"]))),ce=g.a.div(ie||(ie=Object(h.a)(["\n  ","\n"])),(function(e){return e.debugMode?"border: 1px solid red;":null}));var le=function(e){var a=Object(s.useRef)(null),t=Object(s.useRef)(null),r=Object(s.useState)(0),i=Object(d.a)(r,2),n=i[0],o=i[1];Object(s.useEffect)((function(){a.current&&(a.current.innerHTML="",t.current=new ee("#main-chord-diagram-wrapper",e.diagramConfiguration)),t.current&&t.current.drawBaseDiagram()}),[e.diagramConfiguration]),Object(s.useEffect)((function(){if(null!==t.current){var a=e.chords[n],r=function(e){var a=Object(ae.findGuitarChord)(e);if(!a)return null;var t=a.fingerings[0].positions,r=[],i=[1,2,3,4,5,6],s=[],n=1;return t.reverse().forEach((function(e){var a=e.fret,t=e.stringIndex;0===a?r.push(t):s.push({index:n++,string:6-t,fret:a}),i.includes(t)&&i.splice(i.indexOf(t),1)})),{fingers:s,position:Math.min.apply(Math,Object(w.a)(s.map((function(e){return e.fret})))),mutedStrings:i,openStrings:r}}(a);r&&t.current.drawChord(r,a,!0)}}),[e.chords[n]]);var c=function(a){n+a<0?o(e.chords.length-1):n+a===e.chords.length?o(0):o(n+a)};return Object(b.jsxs)(ne,{children:[Object(b.jsx)(ce,{id:"main-chord-diagram-wrapper",ref:a,debugMode:e.diagramConfiguration.debugMode}),Object(b.jsxs)(oe,{children:[Object(b.jsx)(se.a,{onClick:function(){return c(-1)},children:"<-- Previous Chord"}),Object(b.jsx)(se.a,{onClick:function(){return c(1)},children:"Next Chord --\x3e"})]})]})},de=function(e){return Object(b.jsx)("input",{value:e.chordsText,onChange:function(a){e.setChordsText(a.target.value)}})};var he,ge=function(e){var a=function(e){for(var a=0,t=[];a<e.length;){var r=e[a];if("|"!==r)if(/\s/.test(r))a++;else if(":"!==r){"."===r&&t.push({type:"dot",value:"."});var i=/[a-zA-Z0-9#-+()]/i;if(!i.test(r))throw new TypeError("I dont know what this character is: "+r);for(var s="";i.test(r);)s+=r,r=e[++a];t.push({type:"chord",value:s})}else a++;else"|"===e[a+1]?(t.push({type:"double barline",value:"||"}),a++):t.push({type:"barline",value:"|"}),a++}return t}(e),t=function(e){var a=0;function t(){var r=e[a];if("chord"===r.type)return a++,{type:"chord",value:r.value};if("double barline"===r.type){var i={type:"Section",content:[]};for(r=e[++a];"double barline"!==r.type;)i.content.push(t()),r=e[a];return a++,i}if("barline"===r.type){r=e[++a];for(var s={type:"bar",chords:[]};"barline"!==r.type;)s.chords.push(t()),r=e[a];return e[a+1]||++a,s}throw new TypeError("Couldn'd recognize token type \"".concat(r.type,'""'))}for(var r={type:"Chart",body:[]};a<e.length;)r.body.push(t());return r}(a);return console.log(t),t.body.filter((function(e){return"bar"===e.type})).flatMap((function(e){return e.chords.map((function(e){return e.value}))}))},me=t(134),ue=t.n(me),fe=g.a.div(he||(he=Object(h.a)(["\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n"])));var pe=function(){var e=Object(s.useState)(["C"]),a=Object(d.a)(e,2),t=a[0],r=a[1],i=Object(s.useState)("C"),n=Object(d.a)(i,2),o=n[0],c=n[1];try{ge("|"+o+"|").map((function(e){return ue()(e,{pascalCase:!0})}))}catch(f){console.error("can't parse chords")}var h=Object(s.useState)(Object(l.a)(Object(l.a)({},_),{},{debugMode:!1})),g=Object(d.a)(h,2),m=g[0],u=g[1];return Object(b.jsxs)(fe,{children:[Object(b.jsx)(q,{chords:t,setChords:r,diagramConfiguration:m,setDiagramConfiguration:u}),Object(b.jsxs)("div",{children:[Object(b.jsx)(de,{chordsText:o,setChordsText:c}),Object(b.jsx)(le,{diagramConfiguration:m,chords:t})]})]})},be=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,286)).then((function(a){var t=a.getCLS,r=a.getFID,i=a.getFCP,s=a.getLCP,n=a.getTTFB;t(e),r(e),i(e),s(e),n(e)}))};t(228),t(229),t(230),t(231);c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(pe,{})}),document.getElementById("root")),be()}},[[232,1,2]]]);
//# sourceMappingURL=main.0e43b97e.chunk.js.map