{"version":3,"sources":["components/DiagramConfiguration.tsx","ChordDiagram/ChordDiagram.ts","ChordDiagram/StringToChord.ts","components/ChordConfigurationPanel.tsx","components/ChordsSequence.tsx","components/layout/BasicTabs.tsx","components/ConfigurationPanel.tsx","components/MainChord.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Wraper","styled","div","Row","DiagramConfiguration","diagramConfiguration","setDiagramConfiguration","handleNumberChange","value","param","handleBooleanChange","handleStringChange","TextField","label","variant","defaultValue","width","onBlur","e","parseInt","target","height","numOfStrings","numOfFrets","stringWidth","fretsWidth","forcePosition","animationDuration","FormControlLabel","control","Switch","checked","showFretsLabels","onChange","showBridgeLabel","showFingerLabels","showOpenStringsLabels","showTuning","tuning","split","defaultColor","bridgeColor","stringColor","fretColor","textColor","labelColor","backgroundColor","fontFamily","fontSize","fontStyle","fontWeight","defaultParams","fingersLabelColor","ChordDiagram","selector","params","draw","elements","calcedParams","currentTitle","this","SVG","addTo","size","stringSpacing","fretSpacing","origin","x","y","bridgeStrokeWidth","Math","ceil","maxFontSize","max","layer","msg","color","attrs","textAttrs","family","style","weight","opacity","text","stroke","fill","font","move","length","fromX","fromY","toX","toY","line","circle","console","log","table","strings","frets","layers","points","forEach","point","index","drawPointAt","baseDiagram","group","attr","id","background","fretsCover","bridge","bridgeCover","fretLabels","fretLabelsCover","stringsLabels","barres","fingers","stringMarkings","chordTitle1","chordTitle2","coverTopGradient","gradient","add","stop","rotate","coverBottomGradient","diagramWidth","topDiagramCoverXPosition","labelCoverWidth","topLabelCoverHeight","node","rect","bridgeFromX","bridgeFromY","bridgeHeight","fretLabelXPosition","drawText","bridgeCoverHeight","i","drawLine","toString","fretsCoverTopHeight","fretsCoverTop","fretsCoverBottomHeight","fretsCoverBottomYPosition","fretsCoverBottom","fretsLabelCoverTop","fretsLabelCoverBottom","fretsLabelCoverSide","getFingerBasePosition","fingerBasePositionX","fingerBasePositionY","barreLayerName","fingersColor","linecap","fingerLayerName","drawCircle","fingersTopCoer","openStringMarkins","mutedStringMarkings","openStringMarkingLayerName","getOpenStringMarkingBaseYPosition","mutedStringMarkingLayerName","getMutedStringMarkingBaseYPosition","stringMarkingCover","moveDiagramToFret","debugMode","printParams","fingerIndex","chordPosition","finger","barreLength","string","fret","actualString","Array","isArray","isForcePositionExists","undefined","isNaN","chordPositionAdd","forcePositionAdd","finalAdd","moveToX","moveToY","fretNumber","animate","maxStartFret","topFretLine","error","bridgeTopY","labelsTopY","chord","startFret","find","getFingerChordPosition","x1","x2","mutedStrings","includes","openStrings","moveOldTitle","drawChordTitle","title","chordTitleNumber","setTimeout","clear","sortFingers","fingerA","fingerB","fingerAString","fingerBString","getEmptyChordObject","getEmptyChordConfiguration","availablePositions","isLastPositionCustom","selectedPosition","chords","constructChordStringFromConfigurableChord","chordString","chordStringParams","selectedChord","fingerStringParams","join","stringToConfigurableChord","indexOf","chordTitle","config","position","otherParams","stringStart","splice","push","char","mutedString","parseChordString","chordFingerings","findGuitarChord","allAvailablePositions","fingerings","map","_","initialSelectedPosition","fingering","positions","barre","currentBarre","currentBarreFret","reverse","stringIndex","stringIndices","filter","sort","getChordFromFingering","arrayToConfigurableChords","ChordConfigurationWrapper","selected","alignCenter","ChordLabel","ShowChordButton","StyledTextField","StyledAutoComplete","Autocomplete","StyledCheckbox","Checkbox","StyledTable","getFingerByString","ChordConfigurationPanel","props","useState","chordConfiguration","setConfig","wrapper","useRef","useEffect","current","isCurrentChord","scrollIntoView","behavior","block","handleBlur","newString","handleFingerValueChange","attribute","newConfig","findIndex","actualValue","ref","onClick","setAsCurrentChord","helperText","disableClearable","options","getOptionLabel","option","renderInput","onFocus","select","fullWidth","inputProps","textAlign","NaN","disabled","newMutedStrings","newOpenStrings","StyledButton","button","ButtonWrapper","InputWrapper","ChordsSequence","stringValue","setStringValue","chordsConfigurations","handleChange","newChords","setChordsConfigurations","removeChord","chordArray","replace","multiline","currentChord","setCurrentChord","StyledPanel","hidden","StylePanelContentWrapper","Box","TabPanel","children","role","StyleTabsWrapper","BasicTabs","tabs","React","setValue","sx","borderBottom","borderColor","Tabs","event","newValue","tab","Tab","content","Wrapper","ConfigurationPanel","setChords","MainChordWrapper","ButtonContainer","ChordDiagramWrapper","MainChord","diagramWrapper","chordDiagram","innerHTML","drawBaseDiagram","drawChord","handleMoveChord","direction","Button","Main","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.355ee340.chunk.js","sourcesContent":["import styled from \"@emotion/styled\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport Switch from \"@mui/material/Switch\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { ChordDiagramParams } from \"../ChordDiagram\";\n\nconst Wraper = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  padding: 30px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  gap: 15px;\n`;\n\ntype ConfigurationPanelProps = {\n  diagramConfiguration: ChordDiagramParams;\n  setDiagramConfiguration: (configuration: ChordDiagramParams) => void;\n};\n\nfunction DiagramConfiguration({\n  diagramConfiguration,\n  setDiagramConfiguration,\n}: ConfigurationPanelProps) {\n  const handleNumberChange = (\n    value: number,\n    param: keyof ChordDiagramParams\n  ) => {\n    setDiagramConfiguration({\n      ...diagramConfiguration,\n      [param]: value,\n    });\n  };\n\n  const handleBooleanChange = (\n    value: boolean,\n    param: keyof ChordDiagramParams\n  ) => {\n    setDiagramConfiguration({\n      ...diagramConfiguration,\n      [param]: value,\n    });\n  };\n\n  const handleArrayChange = (\n    value: string,\n    param: keyof ChordDiagramParams\n  ) => {\n    setDiagramConfiguration({\n      ...diagramConfiguration,\n      [param]: value.split(\",\"),\n    });\n  };\n\n  const handleStringChange = (\n    value: string,\n    param: keyof ChordDiagramParams\n  ) => {\n    setDiagramConfiguration({\n      ...diagramConfiguration,\n      [param]: value,\n    });\n  };\n\n  return (\n    <Wraper>\n      <Row>\n        <TextField\n          label=\"Width\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.width}\n          onBlur={(e) => handleNumberChange(parseInt(e.target.value), \"width\")}\n        />\n        <TextField\n          label=\"Height\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.height}\n          onBlur={(e) => handleNumberChange(parseInt(e.target.value), \"height\")}\n        />\n        <TextField\n          label=\"# of Strings\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.numOfStrings}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"numOfStrings\")\n          }\n        />\n        <TextField\n          label=\"# of Frets\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.numOfFrets}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"numOfFrets\")\n          }\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"String Width\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.stringWidth}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"stringWidth\")\n          }\n        />\n        <TextField\n          label=\"Frets Width\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fretsWidth}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"fretsWidth\")\n          }\n        />\n        <TextField\n          label=\"Start Position\"\n          variant=\"standard\"\n          defaultValue={!diagramConfiguration.forcePosition && diagramConfiguration.forcePosition !== 0 ? \"\" : diagramConfiguration.forcePosition}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"forcePosition\")\n          }\n        />\n        <TextField\n          label=\"Anim. Duration\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.animationDuration}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"animationDuration\")\n          }\n        />\n      </Row>\n      <Row>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={diagramConfiguration.showFretsLabels}\n              onChange={(e) =>\n                handleBooleanChange(e.target.checked, \"showFretsLabels\")\n              }\n            />\n          }\n          label=\"Show Fret Labels\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={diagramConfiguration.showBridgeLabel}\n              onChange={(e) =>\n                handleBooleanChange(e.target.checked, \"showBridgeLabel\")\n              }\n            />\n          }\n          label=\"Show Bridge Labels\"\n        />\n      </Row>\n      <Row>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={diagramConfiguration.showFingerLabels}\n              onChange={(e) =>\n                handleBooleanChange(e.target.checked, \"showFingerLabels\")\n              }\n            />\n          }\n          label=\"Show Finger Label\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={diagramConfiguration.showOpenStringsLabels}\n              onChange={(e) =>\n                handleBooleanChange(e.target.checked, \"showOpenStringsLabels\")\n              }\n            />\n          }\n          label=\"Show Open Strings Labels\"\n        />\n      </Row>\n      <Row>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={diagramConfiguration.showTuning}\n              onChange={(e) =>\n                handleBooleanChange(e.target.checked, \"showTuning\")\n              }\n            />\n          }\n          label=\"Show Tuning\"\n        />\n        <TextField\n          label=\"Tuning\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.tuning}\n          onBlur={(e) => handleArrayChange(e.target.value, \"tuning\")}\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"Default Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.defaultColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"defaultColor\")}\n        />\n        <TextField\n          label=\"Bridge Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.bridgeColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"bridgeColor\")}\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"String Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.stringColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"stringColor\")}\n        />\n        <TextField\n          label=\"Fret Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fretColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"fretColor\")}\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"Text Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.textColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"textColor\")}\n        />\n        <TextField\n          label=\"Label Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.labelColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"labelColor\")}\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"Background Color\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.backgroundColor}\n          onBlur={(e) => handleStringChange(e.target.value, \"backgroundColor\")}\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"Font Family\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fontFamily}\n          onBlur={(e) => handleStringChange(e.target.value, \"fontFamily\")}\n        />\n        <TextField\n          label=\"Font Size\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fontSize}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"fontSize\")\n          }\n        />\n      </Row>\n      <Row>\n        <TextField\n          label=\"Font Style\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fontStyle}\n          onBlur={(e) => handleStringChange(e.target.value, \"fontStyle\")}\n        />\n        <TextField\n          label=\"Font Weight\"\n          variant=\"standard\"\n          defaultValue={diagramConfiguration.fontWeight}\n          onBlur={(e) =>\n            handleNumberChange(parseInt(e.target.value), \"fontWeight\")\n          }\n        />\n      </Row>\n    </Wraper>\n  );\n}\n\nexport default DiagramConfiguration;\n","import { SVG, Svg, G, Gradient } from \"@svgdotjs/svg.js\";\nimport { Chord, Finger } from \"./types\";\n\nexport type ChordDiagramParams = {\n  width: number;\n  height: number;\n  numOfStrings: number;\n  numOfFrets: number;\n  stringWidth: number;\n  fretsWidth: number;\n  showFretsLabels: boolean;\n  showBridgeLabel: boolean;\n  showFingerLabels: boolean;\n  showOpenStringsLabels: boolean;\n  showTuning: boolean;\n  tuning: string[];\n  defaultColor: string;\n  bridgeColor?: string;\n  stringColor?: string;\n  fretColor?: string;\n  textColor?: string;\n  labelColor?: string;\n  fingersColor?: string;\n  fingersLabelColor?: string;\n  backgroundColor: string;\n  fontFamily?: string;\n  fontSize?: number;\n  fontStyle?: string;\n  fontWeight?: string;\n  debugMode?: boolean;\n  animationDuration?: number;\n  forcePosition?: number\n};\n\nexport const defaultParams: ChordDiagramParams = {\n  width: 500,\n  height: 600,\n  numOfStrings: 6,\n  numOfFrets: 5,\n  stringWidth: 1,\n  fretsWidth: 1,\n  showTuning: true,\n  showFretsLabels: false,\n  showBridgeLabel: false,\n  showFingerLabels: true,\n  showOpenStringsLabels: false,\n  tuning: [\"E\", \"A\", \"D\", \"G\", \"B\", \"E\"],\n  defaultColor: \"#666666\",\n  fingersLabelColor: \"#ffffff\",\n  backgroundColor: \"#ffffff\",\n  animationDuration: 500,\n  forcePosition: 0\n};\n\ntype TextAttributes = {\n  family: ChordDiagramParams[\"fontFamily\"];\n  size: ChordDiagramParams[\"fontSize\"];\n  style: ChordDiagramParams[\"fontStyle\"];\n  weight: ChordDiagramParams[\"fontWeight\"];\n  \"text-anchor\": string;\n  opacity: number;\n};\n\nexport class ChordDiagram {\n  private draw: Svg;\n  private params: ChordDiagramParams = defaultParams;\n  private elements: any = {};\n  private calcedParams: any = {};\n  private currentTitle: number = 1;\n\n  constructor(selector: string, params: Partial<ChordDiagramParams> = {}) {\n    this.params = {\n      ...this.params,\n      ...params,\n    };\n    this.draw = SVG()\n      .addTo(selector)\n      .size(this.params.width, this.params.height);\n\n    this.calcedParams.width = this.params.width * 0.75;\n    this.calcedParams.height = this.params.height * 0.75;\n    this.calcedParams.stringSpacing =\n      this.calcedParams.width / this.params.numOfStrings;\n    this.calcedParams.fretSpacing =\n      this.calcedParams.height / (this.params.numOfFrets + 2);\n    this.calcedParams.origin = {\n      x: this.params.width * 0.15 + this.calcedParams.stringSpacing / 2,\n      y: this.params.height * 0.15 + this.calcedParams.fretSpacing,\n    };\n    this.calcedParams.bridgeStrokeWidth = Math.ceil(\n      this.calcedParams.height / 36\n    );\n    this.calcedParams.animationDuration = this.params.animationDuration || 500;\n\n    const fontSize =\n      this.params.fontSize || Math.ceil(this.calcedParams.width / 20);\n    const maxFontSize = Math.max(\n      this.calcedParams.stringSpacing / 2,\n      this.calcedParams.fretSpacing / 2\n    );\n    this.calcedParams.fontSize =\n      fontSize > maxFontSize ? maxFontSize : fontSize;\n  }\n\n  drawText(\n    layer: Svg | G,\n    x: number,\n    y: number,\n    msg: string,\n    color: string | undefined,\n    attrs: Partial<TextAttributes> = {}\n  ) {\n    const textAttrs: any = {\n      family:\n        this.params.fontFamily ||\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n      size: this.calcedParams.fontSize,\n      style: this.params.fontStyle,\n      weight: this.params.fontWeight || \"100\",\n      opacity: 1,\n      ...attrs,\n    };\n\n    const text = layer\n      .text(msg)\n      .stroke(color || this.params.defaultColor)\n      .fill(color || this.params.defaultColor)\n      .font(textAttrs);\n\n    return text.move(x - text.length() / 2, y);\n  }\n\n  drawLine(\n    layer: Svg | G,\n    fromX: number,\n    fromY: number,\n    toX: number,\n    toY: number\n  ) {\n    return layer.line(0, 0, toX - fromX, toY - fromY).move(fromX, fromY);\n  }\n\n  drawCircle(layer: Svg | G, size: number, x: number, y: number) {\n    return layer.circle(size).move(x, y);\n  }\n\n  drawPointAt(x: number, y: number) {\n    this.draw\n      .circle(4, 4)\n      .fill(\"red\")\n      .move(x - 2, y - 2);\n  }\n\n  private printParams() {\n    console.log(\"Calced Params:\");\n    console.table(this.calcedParams);\n    const { strings, frets, layers, ...elements } = this.elements;\n    console.log(\"Strings:\");\n    console.table(strings);\n    console.log(\"Frets:\");\n    console.table(frets);\n    console.log(\"Layers:\");\n    console.table(layers);\n    console.log(\"Other Elements:\");\n    console.table(elements);\n  }\n\n  private debug(points: number[][]) {\n    points.forEach((point, index) => {\n      console.log(`debug point ${index + 1}: ${point[0]}, ${point[1]}`);\n      this.drawPointAt(point[0], point[1]);\n    });\n  }\n\n  drawBaseDiagram() {\n    const baseDiagram = this.draw.group().attr({ id: \"baseDiagram\" });\n\n    //order is important!!\n    this.elements.layers = {\n      baseDiagram: baseDiagram,\n      background: baseDiagram.group().attr({ id: \"background\" }),\n      strings: baseDiagram.group().attr({ id: \"strings\" }),\n      frets: baseDiagram.group().attr({ id: \"frets\" }),\n      fretsCover: baseDiagram.group().attr({ id: \"fretsCover\" }),\n      bridge: baseDiagram.group().attr({ id: \"bridge\" }),\n      bridgeCover: baseDiagram.group().attr({ id: \"bridgeCover\" }),\n      fretLabels: baseDiagram.group().attr({ id: \"fretLabels\" }),\n      fretLabelsCover: baseDiagram.group().attr({ id: \"fretLabelsCover\" }),\n      stringsLabels: baseDiagram.group().attr({ id: \"stringsLabels\" }),\n      barres: baseDiagram.group().attr({ id: \"barres\" }),\n      fingers: baseDiagram.group().attr({ id: \"fingers\" }),\n      stringMarkings: baseDiagram.group().attr({ id: \"stringMarkings\" }),\n      chordTitle1: baseDiagram.group().attr({ id: \"chordTitle1\" }),\n      chordTitle2: baseDiagram.group().attr({ id: \"chordTitle2\" }),\n    };\n\n    const coverTopGradient = this.draw\n      .gradient(\"linear\", (add: Gradient) => {\n        add.stop(0, this.params.backgroundColor);\n        add.stop(0.9, this.params.backgroundColor);\n        add.stop(1, this.params.backgroundColor, 0);\n      })\n      .rotate(90);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const coverTopGradientDebug = this.draw\n      .gradient(\"linear\", (add: Gradient) => {\n        add.stop(0, \"rgba(255,0,0)\", 0.5);\n        add.stop(0.9, \"rgba(255,0,0)\", 0.5);\n        add.stop(1, \"rgba(0,255,0)\", 0.5);\n      })\n      .rotate(90);\n\n    const coverBottomGradient = this.draw\n      .gradient(\"linear\", (add: Gradient) => {\n        add.stop(0, this.params.backgroundColor, 0);\n        add.stop(0.1, this.params.backgroundColor);\n        add.stop(1, this.params.backgroundColor);\n      })\n      .rotate(90);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const coverBottomGradientDebug = this.draw\n      .gradient(\"linear\", (add: Gradient) => {\n        add.stop(0, \"rgba(0,255,0)\", 0.5);\n        add.stop(0.1, \"rgba(255,0,0)\", 0.5);\n        add.stop(1, \"rgba(255,0,0)\", 0.5);\n      })\n      .rotate(90);\n\n    const diagramWidth =\n      this.calcedParams.stringSpacing * (this.params.numOfStrings - 1) +\n      this.params.stringWidth;\n    const topDiagramCoverXPosition =\n      this.calcedParams.origin.x - this.params.fretsWidth / 2;\n    const labelCoverWidth =\n      this.calcedParams.origin.x - this.params.fretsWidth / 2;\n    const topLabelCoverHeight =\n      this.calcedParams.origin.y -\n      this.calcedParams.bridgeStrokeWidth / 2 -\n      this.calcedParams.fontSize / 2;\n\n    /****** BACKGROUND ******/\n    this.elements.background = {\n      node: this.elements.layers.background\n        .rect(this.params.width, this.params.height)\n        .stroke({ width: 0 })\n        .fill(this.params.backgroundColor),\n    };\n\n    /****** BRIDGE *****/\n\n    // bridge\n    const bridgeFromX =\n      this.calcedParams.origin.x - this.params.stringWidth / 2;\n    const bridgeFromY =\n      this.calcedParams.origin.y - this.calcedParams.bridgeStrokeWidth;\n    const bridgeHeight = this.calcedParams.origin.y - bridgeFromY;\n    const fretLabelXPosition =\n      this.calcedParams.origin.x -\n      this.calcedParams.fontSize / 1.7 -\n      this.calcedParams.stringSpacing / 4;\n\n    this.elements.bridge = {\n      node: this.elements.layers.bridge\n        .rect(diagramWidth, bridgeHeight)\n        .move(bridgeFromX, bridgeFromY)\n        .stroke({ width: 0 })\n        .fill(this.params.bridgeColor || this.params.defaultColor),\n      label: this.drawText(\n        this.elements.layers.fretLabels,\n        fretLabelXPosition,\n        this.calcedParams.origin.y -\n          this.calcedParams.bridgeStrokeWidth / 2 -\n          this.calcedParams.fontSize * 0.7,\n        \"B\",\n        this.params.textColor,\n        {\n          opacity: this.params.showBridgeLabel ? 1 : 0,\n        }\n      ),\n    };\n\n    // bridge cover\n    const bridgeCoverHeight =\n      this.calcedParams.origin.y - this.calcedParams.bridgeStrokeWidth;\n    this.elements.bridgeCover = {\n      node: this.elements.layers.bridgeCover\n        .rect(diagramWidth, bridgeCoverHeight)\n        .move(topDiagramCoverXPosition, 0)\n        .stroke({ width: 0 })\n        .fill(this.params.backgroundColor),\n    };\n\n    /****** FRETS *****/\n\n    // frets with labels\n    this.elements.frets = [];\n    for (let i = 0; i < 25; i += 1) {\n      const fromY =\n        this.calcedParams.origin.y + this.calcedParams.fretSpacing * i;\n\n      this.elements.frets[i] = {\n        node: this.drawLine(\n          this.elements.layers.frets,\n          this.calcedParams.origin.x,\n          fromY,\n          this.calcedParams.origin.x +\n            this.calcedParams.stringSpacing * (this.params.numOfStrings - 1),\n          fromY\n        ).stroke({\n          width: this.params.fretsWidth,\n          color: this.params.fretColor || this.params.defaultColor,\n        }),\n        label:\n          i === 0\n            ? null\n            : this.drawText(\n                this.elements.layers.fretLabels,\n                fretLabelXPosition,\n                fromY - this.calcedParams.fretSpacing / 2 - this.calcedParams.fontSize * 0.75,\n                i.toString(),\n                this.params.textColor,\n                {\n                  opacity: i === 1 && !this.params.showFretsLabels ? 0 : 1\n                }\n              ),\n      };\n    }\n\n    // frets top cover\n    const fretsCoverTopHeight =\n      this.calcedParams.origin.y - this.params.fretsWidth / 2;\n    this.elements.fretsCoverTop = {\n      node: this.elements.layers.fretsCover\n        .rect(diagramWidth, fretsCoverTopHeight)\n        .move(topDiagramCoverXPosition, 0)\n        .stroke({ width: 0 })\n        .fill(this.params.backgroundColor),\n    };\n\n    // frets bottom cover\n    const fretsCoverBottomHeight =\n      this.params.height - this.calcedParams.height + this.params.fretsWidth;\n    const fretsCoverBottomYPosition =\n      this.calcedParams.origin.y +\n      this.calcedParams.fretSpacing * this.params.numOfFrets +\n      this.params.fretsWidth / 2;\n    this.elements.fretsCoverBottom = {\n      node: this.elements.layers.fretsCover\n        .rect(this.params.width, fretsCoverBottomHeight)\n        .move(0, fretsCoverBottomYPosition)\n        .stroke({ width: 0 })\n        .fill(this.params.backgroundColor),\n    };\n\n    // frets top label cover\n    this.elements.fretsLabelCoverTop = {\n      node: this.elements.layers.fretLabelsCover\n        .rect(labelCoverWidth, topLabelCoverHeight + this.calcedParams.fontSize / 2.5)\n        .stroke({ width: 0 })\n        .fill(coverTopGradient),\n    };\n\n    // frets bottom label cover\n    this.elements.fretsLabelCoverBottom = {\n      node: this.elements.layers.fretLabelsCover\n        .rect(labelCoverWidth, topLabelCoverHeight + this.calcedParams.fontSize)\n        .move(0, fretsCoverBottomYPosition - this.calcedParams.fontSize * 1.3)\n        .stroke({ width: 0 })\n        .fill(coverBottomGradient),\n    };\n\n    // frets side label cover\n    if (!this.params.showFretsLabels) {\n      this.elements.fretsLabelCoverSide = {\n        node: this.elements.layers.fretLabelsCover\n          .rect(labelCoverWidth, topLabelCoverHeight)\n          .move(0, this.calcedParams.origin.y + this.calcedParams.fontSize * 2)\n          .stroke({ width: 0 })\n          .fill(coverBottomGradient),\n      };\n      this.elements.fretsLabelCoverSide = {\n        node: this.elements.layers.fretLabelsCover\n          .rect(labelCoverWidth, this.calcedParams.height)\n          .move(0, this.calcedParams.origin.y + topLabelCoverHeight)\n          .stroke({ width: 0 })\n          .fill(this.params.backgroundColor),\n      };\n    }\n\n    /****** STRINGS *****/\n\n    // strings with labels\n    this.elements.strings = [];\n    for (let i = 0; i < this.params.numOfStrings; i += 1) {\n      this.elements.strings[i] = {\n        node: this.drawLine(\n          this.elements.layers.strings,\n          this.calcedParams.origin.x + this.calcedParams.stringSpacing * i,\n          this.calcedParams.origin.y,\n          this.calcedParams.origin.x + this.calcedParams.stringSpacing * i,\n          this.calcedParams.origin.y +\n            this.calcedParams.fretSpacing * this.params.numOfFrets\n        ).stroke({\n          width: this.params.stringWidth,\n          color: this.params.stringColor || this.params.defaultColor,\n        }),\n        label: this.drawText(\n          this.elements.layers.stringsLabels,\n          this.calcedParams.origin.x + this.calcedParams.stringSpacing * i,\n          this.calcedParams.origin.y +\n            this.calcedParams.fretSpacing * this.params.numOfFrets +\n            10,\n          this.params.tuning[i],\n          this.params.textColor,\n          {\n            opacity: this.params.showTuning ? 1 : 0,\n          }\n        ),\n      };\n    }\n\n    /****** FINGERS *****/\n\n    // fingers with labels\n    this.elements.fingers = [];\n    this.elements.barres = []\n    for (let i = 1; i < 5; i += 1) {\n      const [fingerBasePositionX, fingerBasePositionY] =\n      this.getFingerBasePosition(i);\n\n      const barreLayerName = \"barre\" + i;\n        this.elements.layers[barreLayerName] = this.elements.layers.barres\n        .group()\n        .attr({ id: barreLayerName })\n        .opacity(0);\n      this.elements.barres[i] = {\n        node: this.drawLine(\n          this.elements.layers[barreLayerName],\n          fingerBasePositionX + this.calcedParams.stringSpacing / 4,\n          fingerBasePositionY + this.calcedParams.fretSpacing / 4,\n          fingerBasePositionX + this.calcedParams.stringSpacing / 4,\n          fingerBasePositionY + this.calcedParams.fretSpacing / 4\n        ).stroke({\n          width: this.calcedParams.fretSpacing / 2,\n          color: this.params.fingersColor || this.params.defaultColor,\n          linecap: 'round'\n        }),\n        label: null,\n      };\n\n      const fingerLayerName = \"finger\" + i;\n      this.elements.layers[fingerLayerName] = this.elements.layers.fingers\n        .group()\n        .attr({ id: fingerLayerName })\n        .opacity(0);\n      this.elements.fingers[i] = {\n        node: this.drawCircle(\n          this.elements.layers[fingerLayerName],\n          this.calcedParams.fretSpacing / 2,\n          fingerBasePositionX,\n          fingerBasePositionY\n        ).fill(this.params.fingersColor || this.params.defaultColor),\n        label: this.drawText(\n          this.elements.layers[fingerLayerName],\n          fingerBasePositionX + this.calcedParams.fretSpacing / 3.9,\n          this.calcedParams.origin.y +\n            this.calcedParams.fretSpacing * (i - 1) +\n            this.calcedParams.fretSpacing / 3.2,\n          i.toString(),\n          this.params.fingersLabelColor,\n          {\n            size: this.calcedParams.fretSpacing / 3.4,\n            opacity: this.params.showFingerLabels ? 1 : 0,\n          }\n        ),\n      };\n    }\n\n\n\n    // string markings with labels\n    if (this.params.forcePosition && this.params.forcePosition > 1) {\n      this.elements.fingersTopCoer = {\n        node: this.elements.layers.stringMarkings\n            .rect(this.params.width, fretsCoverTopHeight)\n            .move(0, 0)\n            .stroke({ width: 0 })\n            .fill(coverTopGradient),\n      };\n    }\n\n    this.elements.openStringMarkins = [];\n    this.elements.mutedStringMarkings = [];\n    for (let i = 1; i <= this.params.numOfStrings; i += 1) {\n      const openStringMarkingLayerName = \"openStringMarking\" + i;\n      this.elements.layers[openStringMarkingLayerName] =\n        this.elements.layers.stringMarkings\n          .group()\n          .attr({ id: openStringMarkingLayerName })\n          .opacity(0);\n      this.elements.openStringMarkins[i] = {\n        node: this.drawCircle(\n          this.elements.layers[openStringMarkingLayerName],\n          this.calcedParams.fretSpacing / 3,\n          this.calcedParams.origin.x +\n            this.calcedParams.stringSpacing * (i - 1) -\n            this.calcedParams.fretSpacing / 6,\n          this.getOpenStringMarkingBaseYPosition()\n        )\n          .stroke(this.params.defaultColor)\n          .fill(this.params.backgroundColor),\n        label: this.drawText(\n          this.elements.layers[openStringMarkingLayerName],\n          this.calcedParams.origin.x +\n            this.calcedParams.stringSpacing * (i - 1),\n          this.calcedParams.origin.y -\n            this.calcedParams.bridgeStrokeWidth -\n            this.calcedParams.fretSpacing * 0.95,\n          this.params.tuning[i - 1],\n          this.params.defaultColor,\n          {\n            size: this.calcedParams.fretSpacing / 5,\n            opacity: this.params.showOpenStringsLabels ? 1 : 0,\n          }\n        ),\n      };\n      const mutedStringMarkingLayerName = \"mutedStringMarking\" + i;\n      this.elements.layers[mutedStringMarkingLayerName] =\n      this.elements.layers.stringMarkings\n          .group()\n          .attr({ id: mutedStringMarkingLayerName })\n          .opacity(0);\n      this.elements.mutedStringMarkings[i] = {\n        node: null,\n        label: this.drawText(\n          this.elements.layers[mutedStringMarkingLayerName],\n          this.calcedParams.origin.x +\n            this.calcedParams.stringSpacing * (i - 1),\n          this.getMutedStringMarkingBaseYPosition(),\n          \"X\",\n          this.params.defaultColor,\n          {\n            size: this.calcedParams.fretSpacing / 3,\n          }\n        ),\n      };\n    }\n\n    //string markings cover\n    this.elements.stringMarkingCover = {\n      node: this.elements.layers.stringMarkings\n        .rect(this.params.width, this.calcedParams.origin.y - this.calcedParams.stringSpacing * 0.75)\n        .stroke({ width: 0 })\n        .fill(this.params.backgroundColor)\n    };\n\n    this.moveDiagramToFret(this.params.forcePosition || 1);\n\n    this.params.debugMode && this.printParams();\n  }\n\n  getOpenStringMarkingBaseYPosition() {\n    return (\n      this.calcedParams.origin.y -\n      this.calcedParams.bridgeStrokeWidth -\n      this.calcedParams.fretSpacing\n    );\n  }\n\n  getMutedStringMarkingBaseYPosition() {\n    return (\n      this.calcedParams.origin.y -\n      this.calcedParams.bridgeStrokeWidth -\n      this.calcedParams.fretSpacing * 1.05\n    );\n  }\n\n  getFingerBasePosition(fingerIndex: number) {\n    const x =\n      this.calcedParams.origin.x +\n      this.calcedParams.stringSpacing * (this.params.numOfStrings - 0.5);\n    const y =\n      this.calcedParams.origin.y +\n      this.calcedParams.fretSpacing * (fingerIndex - 1) +\n      this.calcedParams.fretSpacing / 4;\n    return [x, y];\n  }\n\n  getFingerChordPosition(chordPosition: number, finger: Finger) {\n    const { string, fret } = finger;\n    const actualString = Array.isArray(string) ? string[0] : string;\n    const isForcePositionExists = this.params.forcePosition !== undefined && !isNaN(this.params.forcePosition);\n    const chordPositionAdd = chordPosition <= 1 ? 0 : -chordPosition + 1;\n    const forcePositionAdd = this.params.forcePosition! <= 1 ? 0 :  -this.params.forcePosition! + 1;\n    const finalAdd = isForcePositionExists ? forcePositionAdd : chordPositionAdd;\n    const moveToX =\n      this.calcedParams.origin.x +\n        ((this.params.numOfStrings - actualString - (1.25 / this.params.numOfFrets)) *\n        this.calcedParams.stringSpacing);\n    const moveToY =\n      this.calcedParams.origin.y +\n        ((fret + finalAdd - 0.75) *\n        this.calcedParams.fretSpacing);\n    let barreLength;\n    if (Array.isArray(string) && string[1]) {\n      barreLength = this.calcedParams.stringSpacing * (string[0] - string[1]) + this.calcedParams.stringSpacing / 4\n    }\n    return [moveToX, moveToY, barreLength];\n  }\n\n  moveDiagramToFret(fretNumber: number, animate?: boolean) {\n    const maxStartFret = 25 - this.params.numOfFrets;\n    const topFretLine = fretNumber - 1;\n    if (topFretLine > maxStartFret || topFretLine < 0) {\n      console.error(`Fret number should be between 1 to ${maxStartFret}`);\n      return;\n    }\n\n    const bridgeTopY =\n      this.calcedParams.origin.y - this.calcedParams.bridgeStrokeWidth;\n    const labelsTopY =\n      this.calcedParams.origin.y - this.calcedParams.fontSize * 0.9;\n    if (animate) {\n      this.elements.layers.bridge\n        .animate(this.calcedParams.animationDuration)\n        .y(bridgeTopY - this.calcedParams.fretSpacing * topFretLine);\n      this.elements.layers.frets\n        .animate(this.calcedParams.animationDuration)\n        .y(\n          this.calcedParams.origin.y -\n            this.calcedParams.fretSpacing * topFretLine\n        );\n      this.elements.layers.fretLabels\n        .animate(this.calcedParams.animationDuration)\n        .y(labelsTopY - this.calcedParams.fretSpacing * topFretLine);\n    } else {\n      this.elements.layers.bridge.y(\n        bridgeTopY - this.calcedParams.fretSpacing * topFretLine\n      );\n      this.elements.layers.frets.y(\n        this.calcedParams.origin.y - this.calcedParams.fretSpacing * topFretLine\n      );\n      this.elements.layers.fretLabels.y(\n        labelsTopY - this.calcedParams.fretSpacing * topFretLine\n      );\n    }\n  }\n\n  drawChord(chord: Chord, animate?: boolean) {\n    if (this.params.forcePosition === undefined || isNaN(this.params.forcePosition)) {\n      this.moveDiagramToFret(chord.startFret, animate);\n    }\n\n    for (let i = 1; i < 5; i++) {\n      const finger = chord.fingers.find((finger: Finger) => finger.index === i);\n      if (finger) {\n        const [x,y, barreLength] = this.getFingerChordPosition(chord.startFret, finger)\n        if (animate) {\n          this.elements.layers[\"finger\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .move(x,y)\n            .opacity(1);\n            if (barreLength) {\n              this.elements.layers[\"barre\" + i]\n              .animate(this.calcedParams.animationDuration)\n              .move(x + this.calcedParams.stringSpacing / 4, y + this.calcedParams.fretSpacing / 4)\n              .opacity(1);\n              this.elements.barres[i].node\n              .animate(this.calcedParams.animationDuration)\n              .attr({x1: x + barreLength})\n            } else {\n              this.elements.layers[\"barre\" + i]\n              .animate(this.calcedParams.animationDuration)\n              .move(x, y + this.calcedParams.fretSpacing / 4)\n              .opacity(1);\n              this.elements.barres[i].node\n              .animate(this.calcedParams.animationDuration)\n              .attr({x1: x + this.calcedParams.fretSpacing / 4, x2: x + this.calcedParams.fretSpacing / 4})\n            }\n        } else {\n          this.elements.layers[\"finger\" + i]\n            .move(x,y)\n            .opacity(1);\n          if (barreLength) {\n            this.elements.layers[\"barre\" + i]\n            .move(x + this.calcedParams.stringSpacing / 4, y + this.calcedParams.fretSpacing / 4)\n            .opacity(1);\n            this.elements.barres[i].node.attr({x1: x + barreLength})\n          }\n        }\n      } else {\n        const [x, y] = this.getFingerBasePosition(i)\n        if (animate) {\n          this.elements.layers[\"finger\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .move(x,y)\n            .opacity(0);\n            this.elements.layers[\"barre\" + i]\n              .animate(this.calcedParams.animationDuration)\n              .move(x + this.calcedParams.stringSpacing /4 ,y + this.calcedParams.fretSpacing /4 )\n              .opacity(0);\n        } else {\n          this.elements.layers[\"finger\" + i]\n            .move(x,y)\n            .opacity(0);\n            this.elements.layers[\"barre\" + i]\n            .move(x + this.calcedParams.stringSpacing /4 ,y + this.calcedParams.fretSpacing /4 )\n              .opacity(0);\n        }\n      }\n    }\n\n    for (let i = 1; i <= this.params.numOfStrings; i++) {\n      if (chord.mutedStrings.includes(this.params.numOfStrings - i + 1)) {\n        if (animate) {\n          this.elements.layers[\"mutedStringMarking\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .y(\n              this.calcedParams.origin.y -\n                this.calcedParams.bridgeStrokeWidth -\n                this.calcedParams.fretSpacing * 0.53\n            )\n            .opacity(1);\n        } else {\n          this.elements.layers[\"mutedStringMarking\" + i]\n            .y(\n              this.calcedParams.origin.y -\n                this.calcedParams.bridgeStrokeWidth -\n                this.calcedParams.fretSpacing * 0.53\n            )\n            .opacity(1);\n        }\n      } else {\n        if (animate) {\n          this.elements.layers[\"mutedStringMarking\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .y(this.getMutedStringMarkingBaseYPosition())\n            .opacity(0);\n        } else {\n          this.elements.layers[\"mutedStringMarking\" + i]\n            .y(this.getMutedStringMarkingBaseYPosition())\n            .opacity(0);\n        }\n      }\n\n      if (chord.openStrings.includes(this.params.numOfStrings - i + 1)) {\n        if (animate) {\n          this.elements.layers[\"openStringMarking\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .y(\n              this.calcedParams.origin.y -\n                this.calcedParams.bridgeStrokeWidth -\n                this.calcedParams.fretSpacing * 0.5\n            )\n            .opacity(1);\n        } else {\n          this.elements.layers[\"openStringMarking\" + i]\n            .y(\n              this.calcedParams.origin.y -\n                this.calcedParams.bridgeStrokeWidth -\n                this.calcedParams.fretSpacing * 0.5\n            )\n            .opacity(1);\n        }\n      } else {\n        if (animate) {\n          this.elements.layers[\"openStringMarking\" + i]\n            .animate(this.calcedParams.animationDuration)\n            .y(this.getOpenStringMarkingBaseYPosition())\n            .opacity(0);\n        } else {\n          this.elements.layers[\"openStringMarking\" + i]\n            .y(this.getOpenStringMarkingBaseYPosition())\n            .opacity(0);\n        }\n      }\n    }\n\n\n      this.moveOldTitle(this.currentTitle);\n      this.currentTitle = this.currentTitle % 2 + 1;\n      this.drawChordTitle(chord.title, this.currentTitle, animate);\n  }\n\n  moveOldTitle(chordTitleNumber: number, animate?: boolean) {\n    if (animate) {\n      this.elements.layers[\"chordTitle\" + chordTitleNumber].animate(this.calcedParams.animationDuration / 2).x(-this.calcedParams.width / 4).opacity(0);\n    }\n    else {\n      this.elements.layers[\"chordTitle\" + chordTitleNumber].x(-this.calcedParams.width / 4).opacity(0);\n    }\n    setTimeout(() => {\n      this.elements.layers[\"chordTitle\" + chordTitleNumber].opacity(1).x(0).clear();\n    }, this.calcedParams.animationDuration / 2)\n  }\n\n  drawChordTitle(title: string, chordTitleNumber: number, animate?: boolean) {\n    this.elements.layers[\"chordTitle\" + chordTitleNumber].opacity(1);\n    if (animate) {\n        this.elements[\"chordTitle\" + chordTitleNumber] = this.drawText(\n          this.elements.layers[\"chordTitle\" + chordTitleNumber],\n          this.params.width,\n          this.calcedParams.origin.y / 5,\n          title,\n          this.params.defaultColor,\n          {\n            size: this.calcedParams.fontSize * 3,\n          }\n        )\n          .attr({ opacity: 0 })\n\n        this.elements[\"chordTitle\" + chordTitleNumber]   \n          .animate(this.calcedParams.animationDuration / 2)\n          .x(this.params.width / 2 - this.elements[\"chordTitle\" + chordTitleNumber].length() / 2)\n          .attr({ opacity: 1 });\n      \n    } else {\n      this.elements[\"chordTitle\" + chordTitleNumber] = this.drawText(\n        this.elements.layers[\"chordTitle\" + chordTitleNumber],\n        this.params.width / 2,\n        this.calcedParams.origin.y / 5,\n        title,\n        this.params.defaultColor,\n        {\n          size: this.calcedParams.fontSize * 3,\n        }\n      );\n    }\n  }\n}\n","//@ts-ignore;\nimport {findGuitarChord} from \"chord-fingering\";\nimport {Finger, Chord} from \"./types\";\n\ntype Position = {\n    fret: number;\n    note: string;\n    stringIndex: number;\n    stringNote: string;\n};\n\ntype Barre = {\n    fret: number,\n    stringIndices: [number, number]\n}\n\ntype Fingering = {\n    positions: Position[],\n    barre: Barre\n}\n\nconst sortFingers = (fingerA: Finger, fingerB: Finger): number => {\n    const fingerAString = Array.isArray(fingerA.string) ? fingerA.string[0] : fingerA.string;\n    const fingerBString = Array.isArray(fingerB.string) ? fingerB.string[0] : fingerB.string;\n    return fingerA.fret === fingerB.fret ? fingerBString - fingerAString : fingerA.fret - fingerB.fret;\n};\n\nexport const getEmptyChordObject = (title: string = \"\"): Chord => ({\n    title,\n    fingers: [],\n    startFret: 0,\n    mutedStrings: [],\n    openStrings: [],\n});\n\nexport function chordToString(chord: Chord): string {\n    let string = \"\";\n\n    string += chord.title;\n\n    return string;\n}\n\n\nfunction getChordFromFingering(chordTitle: string, fingering: Fingering): Chord {\n    if (!fingering) return getEmptyChordObject(chordTitle);\n    // console.log(fingering);\n    const {positions, barre}: Fingering = fingering;\n    const openStrings: number[] = [];\n    const mutedStrings: number[] = [1, 2, 3, 4, 5, 6];\n    const fingers: Finger[] = [];\n    let currentBarre: [number, number] | null = null\n    let currentBarreFret: number | null = null;\n    let startFret: number = 0;\n\n    positions.reverse().forEach((position: Position) => {\n        const {fret, stringIndex} = position;\n        if (startFret === 0 || (fret !== 0 && startFret > fret)) {\n            startFret = fret;\n        }\n\n        let string: Finger[\"string\"] = 6 - stringIndex;\n        if (barre && barre.fret === fret && !currentBarre) {\n            currentBarreFret = barre.fret;\n            currentBarre = [6 - barre.stringIndices[0], 6 - barre.stringIndices[barre.stringIndices.length - 1]];\n            string = currentBarre;\n        }\n\n        if (fret === 0) {\n            openStrings.push(6 - stringIndex);\n        } else {\n            fingers.push({\n                index: 0,\n                string: string,\n                fret,\n            });\n        }\n\n        if (mutedStrings.includes(6 - stringIndex)) {\n            mutedStrings.splice(mutedStrings.indexOf(6 - stringIndex), 1);\n        }\n    });\n\n    const filteredFingers: Finger[] = fingers.filter(finger => {\n        return !currentBarre || currentBarreFret !== finger.fret ||\n            (Array.isArray(finger.string) && currentBarreFret === finger.fret && currentBarre[0] === finger.string[0]);\n    })\n        .sort(sortFingers)\n        .map((finger, index) => ({...finger, index: index + 1}))\n\n    return {\n        title: chordTitle,\n        fingers: filteredFingers,\n        startFret: startFret === 1000 ? 1 : startFret,\n        mutedStrings,\n        openStrings,\n    };\n}\n\nexport const getEmptyChordConfiguration = (title: string = \"\"): ConfigurableChord => ({\n    string: title,\n    title: title,\n    availablePositions: [1],\n    isLastPositionCustom: true,\n    selectedPosition: 1,\n    chords: [getEmptyChordObject(title)]\n});\n\nexport type ConfigurableChord = {\n    string: string,\n    title: string,\n    availablePositions: number[],\n    isLastPositionCustom: boolean,\n    selectedPosition: number,\n    chords: Chord[]\n}\n\nexport function parseChordString(chordString: string) {\n    const hasParams = chordString.indexOf(\":\") !== -1;\n    if (hasParams) {\n        const [chordTitle, rawParams] = chordString.split(\":\");\n\n        const config: { selectedPosition: number, chord: Chord | null } = {\n            selectedPosition: 0,\n            chord: null\n        };\n\n        const [position, ...otherParams] = rawParams.split(\",\");\n        config.selectedPosition = parseInt(position[1])\n        if (otherParams.length > 0) {\n            const fingers: Finger[] = [];\n            const openStrings = [6, 5, 4, 3, 2, 1];\n            const mutedStrings: number[] = [];\n            let startFret = 0;\n            otherParams.forEach(param => {\n                if (param[0] === \"f\") {\n                    const fret = parseInt(param[2]);\n                    if (startFret === 0 || (fret !== 0 && startFret > fret)) {\n                        startFret = fret;\n                    }\n                    const stringStart = parseInt(param[3]);\n                    openStrings.splice(openStrings.indexOf(stringStart), 1);\n\n                    fingers.push({\n                        index: parseInt(param[1]),\n                        fret,\n                        string: param.length === 5 ? [stringStart, parseInt(param[4])] : stringStart\n                    });\n                } else {\n                    param.split(\"\").forEach(char => {\n                        const mutedString = parseInt(char);\n                        openStrings.splice(openStrings.indexOf(mutedString), 1);\n                        if (char !== \"m\") {\n                            mutedStrings.push(mutedString);\n                        }\n                    })\n                }\n            })\n            config.chord = {\n                title: chordTitle,\n                fingers,\n                openStrings,\n                mutedStrings,\n                startFret\n            }\n        }\n        return {\n            chordTitle: chordTitle,\n            ...config\n        }\n\n    }\n    return {\n        chordTitle: chordString,\n        selectedPosition: 0,\n        chord: null\n    }\n}\n\nexport const constructChordStringFromConfigurableChord = (chord: ConfigurableChord): string => {\n    let chordString = chord.title;\n    let chordStringParams = \"\";\n    if (chord.selectedPosition !== 1 || (chord.isLastPositionCustom && chord.availablePositions.length === 1)) {\n        chordStringParams += \"p\" + chord.selectedPosition;\n    }\n    if (chord.isLastPositionCustom && chord.selectedPosition === chord.availablePositions.length) {\n        const selectedChord = chord.chords[chord.selectedPosition - 1];\n        selectedChord.fingers.forEach(finger => {\n            let fingerStringParams = `${chordStringParams !== \"\" ? \",\" : \"\"}f${finger.index}`;\n            fingerStringParams += finger.fret;\n            fingerStringParams += Array.isArray(finger.string) ? \"\" + finger.string[0] + finger.string[1] : finger.string;\n            chordStringParams += fingerStringParams;\n        })\n\n        if (selectedChord.mutedStrings.length > 0) {\n            chordStringParams += `${chordStringParams !== \"\" ? \",\" : \"\"}m${selectedChord.mutedStrings.join(\"\")}`;\n        }\n    }\n    return chordStringParams === \"\" ? chordString : `${chordString}:${chordStringParams}`\n}\n\n\nexport function stringToConfigurableChord(chordString: string): ConfigurableChord {\n    const {chordTitle, selectedPosition, chord} = parseChordString(chordString);\n    const chordFingerings = findGuitarChord(chordTitle);\n\n    if (!chordFingerings) return getEmptyChordConfiguration(chordTitle);\n    const allAvailablePositions = chordFingerings.fingerings.map((_: any, index: number) => index + 1);\n    const initialSelectedPosition =  selectedPosition || 1;\n\n    const chords: Chord[] = chordFingerings.fingerings.map((fingering: Fingering) => getChordFromFingering(chordTitle, fingering));\n\n    return {\n        string: chordString,\n        title: chordTitle,\n        availablePositions: !!chord ? [...allAvailablePositions, allAvailablePositions.length + 1] : allAvailablePositions,\n        isLastPositionCustom: !!chord,\n        selectedPosition: !!chord ? allAvailablePositions.length + 1 : initialSelectedPosition,\n        chords: !!chord ? [...chords, chord] : chords\n    }\n}\n\nexport function arrayToConfigurableChords(chords: string[]): ConfigurableChord[] {\n    return chords.map(chord => {\n        return stringToConfigurableChord(chord);\n    })\n}\n","import React, { ChangeEvent, useEffect, useRef, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport TextField from \"@mui/material/TextField\";\nimport {Chord, ConfigurableChord, constructChordStringFromConfigurableChord, Finger, stringToConfigurableChord } from \"../ChordDiagram\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport Checkbox from \"@mui/material/Checkbox\";\n\nconst ChordConfigurationWrapper = styled.div<{selected: boolean}>`\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 20px;\n  border:  ${({selected}) => selected ? \"3px solid gray\" : \"1px solid gray\"};\n  margin: 20px;\n  position: relative;\n`;\n\nconst Row = styled.div<{alignCenter?: boolean}>`\n  display: flex;\n  gap: 20px;\n  ${({alignCenter}) => alignCenter ? `align-items: center;` : null}\n`;\n\nconst ChordLabel = styled.div`\n  position: absolute;\n  top: -10px;\n  left: 15px;\n  background-color: gray;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 0.6em;\n`;\n\nconst ShowChordButton = styled.div`\n  position: absolute;\n  top: 50%;\n  right: -10px;\n  background-color: gray;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  cursor: pointer;\n`;\n\nconst StyledTextField = styled(TextField)<{width?: string}>`\n  flex-grow: 1;\n  ${({width}) => width ? `width: ${width};` : null}\n`;\n\nconst StyledAutoComplete = styled(Autocomplete)<{width: string}>`\n  width: ${({width}) => width};\n`;\n\nconst StyledCheckbox = styled(Checkbox)`\n  padding: 0;\n`;\n\nconst StyledTable = styled.table`\n    width: 100%;\n    border-spacing: 0;\n  \n    & tr:first-of-type {\n      td {\n        border-top: 1px gray solid;\n        \n        &:first-of-type {\n          border-top-left-radius: 10px;\n        }\n\n        &:last-of-type {\n          border-top-right-radius: 10px;\n        }\n      }\n    }\n\n      & tr:last-of-type {\n        td {\n          border-bottom: 1px gray solid;\n\n          &:first-of-type {\n            border-bottom-left-radius: 10px;\n          }\n\n          &:last-of-type {\n            border-bottom-right-radius: 10px;\n          }\n        }\n      }\n    & td {\n      border-right: 1px gray solid;\n      border-bottom: 1px gray solid;\n      padding: 5px 8px;\n\n      &:first-of-type {\n        border-left: 1px gray solid;\n      }\n      \n      &:not(:first-of-type) {\n        text-align: center;\n      }\n    }\n`;\n\ntype ChordConfigurationProps = {\n  index: number;\n  chordConfiguration: ConfigurableChord;\n  onChange: (chord: ConfigurableChord, index: number) => void;\n  removeChord: (index: number) => void;\n  isCurrentChord: boolean;\n  setAsCurrentChord: () => void;\n};\n\nconst getFingerByString = (string: number, chord: Chord): Finger | null => {\n    return (chord && chord.fingers.find(finger => {\n        return (Array.isArray(finger.string) && finger.string[0] === string) || finger.string === string;\n    })) || null;\n}\n\nfunction ChordConfigurationPanel(props: ChordConfigurationProps) {\n  const [config, setConfig] = useState<ConfigurableChord>(props.chordConfiguration);\n  const wrapper = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n      setConfig(props.chordConfiguration)\n  }, [props.chordConfiguration])\n\n    useEffect(() => {\n        if (wrapper.current && props.isCurrentChord) {\n            wrapper.current.scrollIntoView({behavior: \"smooth\", block: \"center\"});\n        }\n    }, [props.isCurrentChord])\n\n  const chord = config.chords[config.selectedPosition - 1];\n\n    const handleChordTitleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setConfig(stringToConfigurableChord(e.target.value));\n    }\n\n    const handleBlur = () => {\n        const newString = constructChordStringFromConfigurableChord(config);\n        props.onChange({...config, string: newString}, props.index);\n    };\n\n    const handleFingerValueChange = (stringIndex: number, attribute: \"index\" | \"fret\" | \"string\" | \"mutedStrings\" , value: any) => {\n        const newConfig = {...config};\n        if (!newConfig.isLastPositionCustom) {\n            newConfig.chords.push(newConfig.chords[newConfig.selectedPosition - 1]);\n            newConfig.selectedPosition = newConfig.chords.length;\n            newConfig.availablePositions.push(newConfig.chords.length);\n            newConfig.isLastPositionCustom = true;\n        } else {\n            newConfig.selectedPosition = newConfig.chords.length;\n        }\n\n        if (attribute === \"mutedStrings\") {\n            newConfig.chords[newConfig.selectedPosition - 1].mutedStrings = value[0];\n            newConfig.chords[newConfig.selectedPosition - 1].openStrings = value[1];\n        } else {\n            const fingerIndex = newConfig.chords[newConfig.selectedPosition - 1].fingers.findIndex(finger => {\n                return (Array.isArray(finger.string) && finger.string[0] === stringIndex) || finger.string === stringIndex;\n            });\n\n            if (fingerIndex > -1) {\n                if (value === \"\") {\n                    newConfig.chords[newConfig.selectedPosition - 1].fingers.splice(fingerIndex , 1)\n                }\n                else {\n                    let actualValue: number | [number, number] = parseInt(value);\n                    if (attribute === \"string\") {\n                        actualValue = [stringIndex, value]\n                    }\n                    newConfig.chords[newConfig.selectedPosition - 1].fingers[fingerIndex] = {\n                        ...newConfig.chords[newConfig.selectedPosition - 1].fingers[fingerIndex],\n                        [attribute]: actualValue\n                    }\n                }\n            } else {\n                newConfig.chords[newConfig.selectedPosition - 1].fingers.push({\n                    index: parseInt(value),\n                    string: stringIndex,\n                    fret: 0\n                })\n            }\n        }\n        setConfig(newConfig);\n        return newConfig;\n    };\n\n  return (\n    <ChordConfigurationWrapper selected={props.isCurrentChord} ref={wrapper}>\n      <ChordLabel>{props.index + 1}</ChordLabel>\n        <ShowChordButton onClick={() => props.setAsCurrentChord()}>&gt;</ShowChordButton>\n        <Row>\n            <StyledTextField\n                label=\"Chord\"\n                variant=\"standard\"\n                value={config.title}\n                onChange={handleChordTitleChange}\n                onBlur={handleBlur}\n                helperText=\"Changing this value will reset the other fields\"\n            />\n            <StyledAutoComplete\n                width=\"110px\"\n                disableClearable\n                options={config.availablePositions}\n                value={config.selectedPosition}\n                onChange={(e, value: any) =>  {\n                    const newConfig = {...config, selectedPosition: value};\n                    const newString = constructChordStringFromConfigurableChord(newConfig);\n                    setConfig({...newConfig, string: newString})\n                    props.onChange({...newConfig, string: newString}, props.index)\n                }}\n                getOptionLabel={(option: any) => {\n                    return config.isLastPositionCustom && option === config.chords.length ? \"Custom\" : option.toString();\n                }}\n                renderInput={(params) => (\n                    <TextField {...params} label=\"Position\" variant=\"standard\" />\n                )}\n            />\n        </Row>\n        <Row alignCenter>\n            <StyledTable>\n                <thead>\n                <tr>\n                    <td style={{width: \"30px\"}}>String:</td>\n                    {[6,5,4,3,2,1].map(string => (\n                        <td key={string}>{string}</td>\n                    ))}\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n                    <td>Finger:</td>\n                    <>\n                        {[6,5,4,3,2,1].map(string => {\n                            const finger = getFingerByString(string, chord);\n                            return (\n                                <td key={string}>\n                                    <StyledTextField\n                                        onFocus={(e) => e.target.select()}\n                                        fullWidth\n                                        key={string}\n                                        width=\"80%\"\n                                        variant=\"standard\"\n                                        inputProps={{style: { textAlign: 'center' }}}\n                                        value={(!isNaN(finger?.index ?? NaN) && finger?.index) || \"\"}\n                                        onChange={(e) => e.target.value !== \"\" && handleFingerValueChange(string, \"index\", e.target.value)}\n                                        onBlur={handleBlur}\n                                    />\n                                </td>\n                            )\n                        })}\n                    </>\n                </tr>\n                <tr>\n                    <td>Fret:</td>\n                    <>\n                        {[6,5,4,3,2,1].map(string => {\n                            const finger = getFingerByString(string, chord);\n                            return (\n                                <td key={string}>\n                                    <StyledTextField\n                                        onFocus={(e) => e.target.select()}\n                                        fullWidth\n                                        key={string}\n                                        width=\"80%\"\n                                        variant=\"standard\"\n                                        inputProps={{style: { textAlign: 'center' }}}\n                                        disabled={!finger?.index}\n                                        value={(!isNaN(finger?.fret ?? NaN) && finger?.fret) || \"\"}\n                                        onChange={(e) => e.target.value !== \"\" && handleFingerValueChange(string, \"fret\", e.target.value)}\n                                        onBlur={handleBlur}\n                                    />\n                                </td>\n                            )\n                        })}\n                    </>\n                </tr>\n                <tr>\n                    <td>Barre:</td>\n                    <>\n                        {[6,5,4,3,2,1].map(string => {\n                            const finger = getFingerByString(string, chord);\n                            return (\n                                <td key={string}>\n                                    <StyledTextField\n                                        onFocus={(e) => e.target.select()}\n                                        fullWidth\n                                        key={string}\n                                        width=\"80%\"\n                                        variant=\"standard\"\n                                        inputProps={{style: { textAlign: 'center' }}}\n                                        disabled={!finger?.index}\n                                        value={(Array.isArray(finger?.string) && !isNaN(finger?.string[1] ?? NaN) && finger?.string[1]) || \"\"}\n                                        onChange={(e) => e.target.value !== \"\" && handleFingerValueChange(string, \"string\", e.target.value)}\n                                        onBlur={handleBlur}\n                                    />\n                                </td>\n                            )\n                        })}\n                    </>\n                </tr>\n                <tr>\n                    <td>Muted:</td>\n                    <>\n                        {[6,5,4,3,2,1].map(string => {\n                            return (\n                                <td key={string}>\n                                    <StyledCheckbox\n                                        checked={chord?.mutedStrings.includes(string) ?? false}\n                                        onChange={(e) => {\n                                            const newMutedStrings = [...chord.mutedStrings]\n                                            const newOpenStrings = [...chord.openStrings]\n                                            if (e.target.checked) {\n                                                newMutedStrings.push(string)\n                                                newOpenStrings.splice(newOpenStrings.indexOf(string), 1)\n                                            } else {\n                                                newMutedStrings.splice(newMutedStrings.indexOf(string), 1)\n                                                newOpenStrings.push(string)\n\n                                            }\n                                            const newConfig = handleFingerValueChange(string, \"mutedStrings\", [newMutedStrings, newOpenStrings])\n                                            const newString = constructChordStringFromConfigurableChord(newConfig);\n                                            props.onChange({...newConfig, string: newString}, props.index);\n                                        }}\n                                    />\n                                </td>\n                            )\n                        })}\n                    </>\n                </tr>\n                </tbody>\n            </StyledTable>\n        </Row>\n    </ChordConfigurationWrapper>\n  );\n}\n\nexport default ChordConfigurationPanel;","import React, { useEffect, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport ChordConfigurationPanel from \"./ChordConfigurationPanel\";\nimport TextField from \"@mui/material/TextField\";\nimport { arrayToConfigurableChords, ConfigurableChord, getEmptyChordConfiguration } from \"../ChordDiagram\";\n\nconst StyledButton = styled.button`\n  padding: 5px;\n  align-self: flex-end;\n  background-color: #ffffff;\n`;\n\nconst ButtonWrapper = styled.div`\n  position: sticky;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent, #eeeeee 30%);\n  padding: 30px 20px 20px;\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst InputWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  background-color: rgba(25, 118, 210, 0.1);\n`;\n\ntype ConfigurationPanelProps = {\n  chordsConfigurations: ConfigurableChord[];\n  setChordsConfigurations: (chords: ConfigurableChord[]) => void;\n  currentChord: number;\n  setCurrentChord: (index: number) => void;\n};\n\nfunction ChordsSequence(props: ConfigurationPanelProps) {\n  const [stringValue, setStringValue] = useState<string>(\"\")\n\n  useEffect(() => {\n    setStringValue(props.chordsConfigurations.map(config => config.string).join(\" \"));\n  }, [props.chordsConfigurations])\n\n  const handleChange = (chord: ConfigurableChord, index: number) => {\n    const newChords = [...props.chordsConfigurations];\n    newChords[index] = chord;\n    props.setChordsConfigurations(newChords);\n  };\n\n  const addChord = () => {\n    props.setChordsConfigurations([...props.chordsConfigurations, getEmptyChordConfiguration()]);\n  };\n\n  const removeChord = (index: number) => {\n    const newChords = [...props.chordsConfigurations];\n    newChords.splice(index, 1);\n    props.setChordsConfigurations(newChords);\n  };\n\n  const handleTextBlur = () => {\n    const chordArray = stringValue === \"\" ? [] : stringValue.replace(\"\\n\", \" \").split(\" \");\n    props.setChordsConfigurations(arrayToConfigurableChords(chordArray));\n  }\n\n  return (\n    <>\n      <InputWrapper>\n        <StyledTextField\n          label={\"Chord Sequence Text Input\"}\n          value={stringValue}\n          onChange={(e) => setStringValue(e.target.value)}\n          onBlur={handleTextBlur}\n          multiline\n        />\n      </InputWrapper>\n      {props.chordsConfigurations.map((config, index) => (\n        <ChordConfigurationPanel\n          key={index}\n          index={index}\n          isCurrentChord={props.currentChord === index}\n          setAsCurrentChord={() => props.setCurrentChord(index)}\n          chordConfiguration={config}\n          onChange={handleChange}\n          removeChord={removeChord}\n        />\n      ))}\n      <ButtonWrapper>\n        <StyledButton onClick={addChord}>+Add Chord</StyledButton>\n      </ButtonWrapper>\n    </>\n  );\n}\n\nexport default ChordsSequence;\n","import React from \"react\";\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport styled from \"@emotion/styled\";\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nconst StyledPanel = styled.div`\n  background-color: #eeeeee;\n  flex-grow: ${({ hidden }) => (hidden ? 0 : 1)};\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow-y: auto;\n`;\n\nconst StylePanelContentWrapper = styled(Box)`\n  padding: 0;\n  width: 100%;\n`;\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index } = props;\n\n  return (\n    <StyledPanel role=\"tabpanel\" hidden={value !== index}>\n      {value === index && (\n        <StylePanelContentWrapper>{children}</StylePanelContentWrapper>\n      )}\n    </StyledPanel>\n  );\n}\n\nconst StyleTabsWrapper = styled(Box)`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\ntype BasicTabsProps = {\n  tabs: {\n    title: string;\n    content: any;\n  }[];\n};\n\nfunction BasicTabs({ tabs }: BasicTabsProps) {\n  const [value, setValue] = React.useState(0);\n\n  const handleChange = (event: React.SyntheticEvent, newValue: number) => {\n    setValue(newValue);\n  };\n\n  return (\n    <StyleTabsWrapper>\n      <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n        <Tabs variant=\"fullWidth\" value={value} onChange={handleChange}>\n          {tabs.map((tab, index) => (\n            <Tab label={tab.title} key={index} />\n          ))}\n        </Tabs>\n      </Box>\n      {tabs.map((tab, index) => (\n        <TabPanel value={value} index={index} key={index}>\n          {tab.content}\n        </TabPanel>\n      ))}\n    </StyleTabsWrapper>\n  );\n}\n\nexport default BasicTabs;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport DiagramConfiguration from \"./DiagramConfiguration\";\nimport ChordsSequence from \"./ChordsSequence\";\nimport BasicTabs from \"./layout/BasicTabs\";\nimport {ChordDiagramParams, ConfigurableChord} from \"../ChordDiagram\";\n\nconst Wrapper = styled.div`\n  height: 100%;\n  width: 30vw;\n`;\n\ntype ConfigurationPanelProps = {\n    chords: ConfigurableChord[];\n    setChords: (chords: ConfigurableChord[]) => void;\n    diagramConfiguration: ChordDiagramParams;\n    setDiagramConfiguration: (configuration: ChordDiagramParams) => void;\n    currentChord: number;\n    setCurrentChord: (index: number) => void;\n};\n\nfunction ConfigurationPanel(props: ConfigurationPanelProps) {\n    return (\n        <Wrapper>\n            <BasicTabs\n                tabs={[\n                    {\n                        title: \"Chords Sequencer\",\n                        content: (\n                            <ChordsSequence\n                                chordsConfigurations={props.chords}\n                                setChordsConfigurations={props.setChords}\n                                currentChord={props.currentChord}\n                                setCurrentChord={props.setCurrentChord}\n                            />\n                        ),\n                    },\n                    {\n                        title: \"Diagram Configuration\",\n                        content: (\n                            <DiagramConfiguration\n                                diagramConfiguration={props.diagramConfiguration}\n                                setDiagramConfiguration={props.setDiagramConfiguration}\n                            />\n                        ),\n                    }\n                ]}\n            />\n        </Wrapper>\n    );\n}\n\nexport default ConfigurationPanel;\n","import React, { useEffect, useRef } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Chord, ChordDiagram, ChordDiagramParams } from \"../ChordDiagram\";\nimport Button from \"@mui/material/Button\";\n\nconst MainChordWrapper = styled.div`\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  padding: 20px;\n`;\n\nconst ChordDiagramWrapper = styled.div<{ debugMode: boolean | undefined }>`\n  ${({ debugMode }) => (debugMode ? \"border: 1px solid red;\" : null)}\n`;\n\ntype MainChordProps = {\n  diagramConfiguration: ChordDiagramParams;\n  chords: Chord[];\n  currentChord: number;\n  setCurrentChord: (index: number) => void;\n};\n\nfunction MainChord({diagramConfiguration, chords, currentChord, setCurrentChord}: MainChordProps) {\n  const diagramWrapper = useRef<HTMLDivElement>(null);\n  const chordDiagram = useRef<ChordDiagram | null>(null);\n\n\n  useEffect(() => {\n    if (diagramWrapper.current) {\n      diagramWrapper.current.innerHTML = \"\";\n      chordDiagram.current = new ChordDiagram(\n        \"#main-chord-diagram-wrapper\",\n        diagramConfiguration\n      );\n    }\n\n    if (chordDiagram.current) {\n      chordDiagram.current.drawBaseDiagram();\n    }\n  }, [diagramConfiguration]);\n\n  useEffect(() => {\n    const chord = chords[currentChord];\n    if (currentChord === -1 ) {\n      setCurrentChord(0);\n    }\n    if (chordDiagram.current !== null) {\n      if (chord) {\n        chordDiagram.current.drawChord(chord, true);\n      } else {\n        // TODO - Show the user that the chord is invalid\n      }\n    }\n\n  }, [chords, currentChord, setCurrentChord]);\n\n  const handleMoveChord = (direction: number) => {\n    if (currentChord + direction < 0) {\n      setCurrentChord(chords.length - 1);\n    } else if (currentChord + direction === chords.length) {\n      setCurrentChord(0);\n    } else if (chords.length === 1) {\n      setCurrentChord(-1);\n    } else {\n      setCurrentChord(currentChord + direction);\n    }\n  };\n\n  return (\n    <MainChordWrapper>\n      <ChordDiagramWrapper\n        id={\"main-chord-diagram-wrapper\"}\n        ref={diagramWrapper}\n        debugMode={diagramConfiguration.debugMode}\n      />\n      <ButtonContainer>\n        <Button onClick={() => handleMoveChord(-1)}>\n          &lt;-- Previous Chord\n        </Button>\n        <Button onClick={() => handleMoveChord(1)}>Next Chord --&gt;</Button>\n      </ButtonContainer>\n    </MainChordWrapper>\n  );\n}\n\nexport default MainChord;\n","import React, {useState} from \"react\";\nimport styled from \"@emotion/styled\";\nimport ConfigurationPanel from \"./components/ConfigurationPanel\";\nimport MainChord from \"./components/MainChord\";\nimport {defaultParams, ChordDiagramParams, arrayToConfigurableChords, ConfigurableChord} from \"./ChordDiagram\";\n// import { parseChords } from \"./parser/parseChords\";\n// import camelCase from \"camelcase\";\n\n\nconst Main = styled.div`\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n`;\n\nfunction App() {\n    const [diagramConfiguration, setDiagramConfiguration] =\n        useState<ChordDiagramParams>({...defaultParams, debugMode: false});\n    const [chords, setChords] = useState<ConfigurableChord[]>(arrayToConfigurableChords([\"C\", \"Cmaj7\", \"C7\", \"F\", \"F/E\", \"D\", \"G\", \"Amin\", \"A-maj7\", \"Am7\", \"Am6\", \"F\", \"Eb\", \"G\", \"C\"]));\n    const [currentChord, setCurrentChord] = useState<number>(0);\n    // try {\n    //   // TODO - use this\n    //   const chordsFromText = parseChords(\"|\" + chords.join(\" \") + \"|\");\n    //   chordsFromText.map((c: string) => camelCase(c, { pascalCase: true }));\n    // } catch (error: any) {\n    //   console.error(`can't parse chords`);\n    // }\n\n\n    return (\n        <Main>\n            <ConfigurationPanel\n                chords={chords}\n                setChords={setChords}\n                diagramConfiguration={diagramConfiguration}\n                setDiagramConfiguration={setDiagramConfiguration}\n                currentChord={currentChord}\n                setCurrentChord={setCurrentChord}\n            />\n            <MainChord\n                diagramConfiguration={diagramConfiguration}\n                chords={chords.map(chord => chord.chords[chord.selectedPosition - 1])}\n                currentChord={currentChord}\n                setCurrentChord={setCurrentChord}\n            />\n        </Main>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"@fontsource/roboto/300.css\";\nimport \"@fontsource/roboto/400.css\";\nimport \"@fontsource/roboto/500.css\";\nimport \"@fontsource/roboto/700.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}