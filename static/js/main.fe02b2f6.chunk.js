(this["webpackJsonpguitar-diagram-gif-generator"]=this["webpackJsonpguitar-diagram-gif-generator"]||[]).push([[0],{167:function(t,e,a){},187:function(t,e){},245:function(t,e,a){"use strict";a.r(e);var r,i,n=a(0),s=a.n(n),o=a(48),c=a.n(o),l=(a(167),a(14)),d=a(6),h=a(20),g=a(21),u=a(3),m=a(300),f=a(301),p=a(297),b=a(2),v=g.a.div(r||(r=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  padding: 30px;\n"]))),j=g.a.div(i||(i=Object(h.a)(["\n  display: flex;\n  gap: 15px;\n"])));var y=function(t){var e=t.diagramConfiguration,a=t.setDiagramConfiguration,r=function(t,r){a(Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},r,t)))},i=function(t,r){a(Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},r,t)))},n=function(t,r){a(Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},r,t)))};return Object(b.jsxs)(v,{children:[Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"Width",variant:"standard",defaultValue:e.width,onBlur:function(t){return r(parseInt(t.target.value),"width")}}),Object(b.jsx)(p.a,{label:"Height",variant:"standard",defaultValue:e.height,onBlur:function(t){return r(parseInt(t.target.value),"height")}}),Object(b.jsx)(p.a,{label:"# of Strings",variant:"standard",defaultValue:e.numOfStrings,onBlur:function(t){return r(parseInt(t.target.value),"numOfStrings")}}),Object(b.jsx)(p.a,{label:"# of Frets",variant:"standard",defaultValue:e.numOfFrets,onBlur:function(t){return r(parseInt(t.target.value),"numOfFrets")}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"String Width",variant:"standard",defaultValue:e.stringWidth,onBlur:function(t){return r(parseInt(t.target.value),"stringWidth")}}),Object(b.jsx)(p.a,{label:"Frets Width",variant:"standard",defaultValue:e.fretsWidth,onBlur:function(t){return r(parseInt(t.target.value),"fretsWidth")}}),Object(b.jsx)(p.a,{label:"Start Position",variant:"standard",defaultValue:e.forcePosition,onBlur:function(t){return r(parseInt(t.target.value),"forcePosition")}}),Object(b.jsx)(p.a,{label:"Anim. Duration",variant:"standard",defaultValue:e.animationDuration,onBlur:function(t){return r(parseInt(t.target.value),"animationDuration")}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(m.a,{control:Object(b.jsx)(f.a,{checked:e.showFretsLabels,onChange:function(t){return i(t.target.checked,"showFretsLabels")}}),label:"Show Fret Labels"}),Object(b.jsx)(m.a,{control:Object(b.jsx)(f.a,{checked:e.showBridgeLabel,onChange:function(t){return i(t.target.checked,"showBridgeLabel")}}),label:"Show Bridge Labels"})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(m.a,{control:Object(b.jsx)(f.a,{checked:e.showFingerLabels,onChange:function(t){return i(t.target.checked,"showFingerLabels")}}),label:"Show Finger Label"}),Object(b.jsx)(m.a,{control:Object(b.jsx)(f.a,{checked:e.showOpenStringsLabels,onChange:function(t){return i(t.target.checked,"showOpenStringsLabels")}}),label:"Show Open Strings Labels"})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(m.a,{control:Object(b.jsx)(f.a,{checked:e.showTuning,onChange:function(t){return i(t.target.checked,"showTuning")}}),label:"Show Tuning"}),Object(b.jsx)(p.a,{label:"Tuning",variant:"standard",defaultValue:e.tuning,onBlur:function(t){return r=t.target.value,i="tuning",void a(Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},i,r.split(","))));var r,i}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"Default Color",variant:"standard",defaultValue:e.defaultColor,onBlur:function(t){return n(t.target.value,"defaultColor")}}),Object(b.jsx)(p.a,{label:"Bridge Color",variant:"standard",defaultValue:e.bridgeColor,onBlur:function(t){return n(t.target.value,"bridgeColor")}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"String Color",variant:"standard",defaultValue:e.stringColor,onBlur:function(t){return n(t.target.value,"stringColor")}}),Object(b.jsx)(p.a,{label:"Fret Color",variant:"standard",defaultValue:e.fretColor,onBlur:function(t){return n(t.target.value,"fretColor")}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"Text Color",variant:"standard",defaultValue:e.textColor,onBlur:function(t){return n(t.target.value,"textColor")}}),Object(b.jsx)(p.a,{label:"Label Color",variant:"standard",defaultValue:e.labelColor,onBlur:function(t){return n(t.target.value,"labelColor")}})]}),Object(b.jsx)(j,{children:Object(b.jsx)(p.a,{label:"Background Color",variant:"standard",defaultValue:e.backgroundColor,onBlur:function(t){return n(t.target.value,"backgroundColor")}})}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"Font Family",variant:"standard",defaultValue:e.fontFamily,onBlur:function(t){return n(t.target.value,"fontFamily")}}),Object(b.jsx)(p.a,{label:"Font Size",variant:"standard",defaultValue:e.fontSize,onBlur:function(t){return r(parseInt(t.target.value),"fontSize")}})]}),Object(b.jsxs)(j,{children:[Object(b.jsx)(p.a,{label:"Font Style",variant:"standard",defaultValue:e.fontStyle,onBlur:function(t){return n(t.target.value,"fontStyle")}}),Object(b.jsx)(p.a,{label:"Font Weight",variant:"standard",defaultValue:e.fontWeight,onBlur:function(t){return r(parseInt(t.target.value),"fontWeight")}})]})]})},P=a(19),O=a(147),S=a(13),x=a(17),C=a(144),w=["strings","frets","layers"],k={width:500,height:600,numOfStrings:6,numOfFrets:5,stringWidth:1,fretsWidth:1,showTuning:!0,showFretsLabels:!1,showBridgeLabel:!1,showFingerLabels:!0,showOpenStringsLabels:!1,tuning:["E","A","D","G","B","E"],defaultColor:"#666666",fingersLabelColor:"#ffffff",backgroundColor:"#ffffff",animationDuration:500,forcePosition:0},F=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(S.a)(this,t),this.draw=void 0,this.params=k,this.elements={},this.calcedParams={},this.currentTitle=1,this.params=Object(l.a)(Object(l.a)({},this.params),a),this.draw=Object(C.a)().addTo(e).size(this.params.width,this.params.height),this.calcedParams.width=.75*this.params.width,this.calcedParams.height=.75*this.params.height,this.calcedParams.stringSpacing=this.calcedParams.width/this.params.numOfStrings,this.calcedParams.fretSpacing=this.calcedParams.height/(this.params.numOfFrets+2),this.calcedParams.origin={x:.15*this.params.width+this.calcedParams.stringSpacing/2,y:.15*this.params.height+this.calcedParams.fretSpacing},this.calcedParams.bridgeStrokeWidth=Math.ceil(this.calcedParams.height/36),this.calcedParams.animationDuration=this.params.animationDuration||500;var r=this.params.fontSize||Math.ceil(this.calcedParams.width/20),i=Math.max(this.calcedParams.stringSpacing/2,this.calcedParams.fretSpacing/2);this.calcedParams.fontSize=r>i?i:r}return Object(x.a)(t,[{key:"drawText",value:function(t,e,a,r,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=Object(l.a)({family:this.params.fontFamily||'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',size:this.calcedParams.fontSize,style:this.params.fontStyle,weight:this.params.fontWeight||"100",opacity:1},n),o=t.text(r).stroke(i||this.params.defaultColor).fill(i||this.params.defaultColor).font(s);return o.move(e-o.length()/2,a)}},{key:"drawLine",value:function(t,e,a,r,i){return t.line(0,0,r-e,i-a).move(e,a)}},{key:"drawCircle",value:function(t,e,a,r){return t.circle(e).move(a,r)}},{key:"drawPointAt",value:function(t,e){this.draw.circle(4,4).fill("red").move(t-2,e-2)}},{key:"printParams",value:function(){console.log("Calced Params:"),console.table(this.calcedParams);var t=this.elements,e=t.strings,a=t.frets,r=t.layers,i=Object(O.a)(t,w);console.log("Strings:"),console.table(e),console.log("Frets:"),console.table(a),console.log("Layers:"),console.table(r),console.log("Other Elements:"),console.table(i)}},{key:"debug",value:function(t){var e=this;t.forEach((function(t,a){console.log("debug point ".concat(a+1,": ").concat(t[0],", ").concat(t[1])),e.drawPointAt(t[0],t[1])}))}},{key:"drawBaseDiagram",value:function(){var t=this,e=this.draw.group().attr({id:"baseDiagram"});this.elements.layers={baseDiagram:e,background:e.group().attr({id:"background"}),strings:e.group().attr({id:"strings"}),frets:e.group().attr({id:"frets"}),fretsCover:e.group().attr({id:"fretsCover"}),bridge:e.group().attr({id:"bridge"}),bridgeCover:e.group().attr({id:"bridgeCover"}),fretLabels:e.group().attr({id:"fretLabels"}),fretLabelsCover:e.group().attr({id:"fretLabelsCover"}),stringsLabels:e.group().attr({id:"stringsLabels"}),barres:e.group().attr({id:"barres"}),fingers:e.group().attr({id:"fingers"}),stringMarkings:e.group().attr({id:"stringMarkings"}),chordTitle1:e.group().attr({id:"chordTitle1"}),chordTitle2:e.group().attr({id:"chordTitle2"})};var a=this.draw.gradient("linear",(function(e){e.stop(0,t.params.backgroundColor),e.stop(.9,t.params.backgroundColor),e.stop(1,t.params.backgroundColor,0)})).rotate(90),r=(this.draw.gradient("linear",(function(t){t.stop(0,"rgba(255,0,0)",.5),t.stop(.9,"rgba(255,0,0)",.5),t.stop(1,"rgba(0,255,0)",.5)})).rotate(90),this.draw.gradient("linear",(function(e){e.stop(0,t.params.backgroundColor,0),e.stop(.1,t.params.backgroundColor),e.stop(1,t.params.backgroundColor)})).rotate(90)),i=(this.draw.gradient("linear",(function(t){t.stop(0,"rgba(0,255,0)",.5),t.stop(.1,"rgba(255,0,0)",.5),t.stop(1,"rgba(255,0,0)",.5)})).rotate(90),this.calcedParams.stringSpacing*(this.params.numOfStrings-1)+this.params.stringWidth),n=this.calcedParams.origin.x-this.params.fretsWidth/2,s=this.calcedParams.origin.x-this.params.fretsWidth/2,o=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-this.calcedParams.fontSize/2;this.elements.background={node:this.elements.layers.background.rect(this.params.width,this.params.height).stroke({width:0}).fill(this.params.backgroundColor)};var c=this.calcedParams.origin.x-this.params.stringWidth/2,l=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,h=this.calcedParams.origin.y-l,g=this.calcedParams.origin.x-this.calcedParams.fontSize/1.7-this.calcedParams.stringSpacing/4;this.elements.bridge={node:this.elements.layers.bridge.rect(i,h).move(c,l).stroke({width:0}).fill(this.params.bridgeColor||this.params.defaultColor),label:this.drawText(this.elements.layers.fretLabels,g,this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth/2-.7*this.calcedParams.fontSize,"B",this.params.textColor,{opacity:this.params.showBridgeLabel?1:0})};var u=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth;this.elements.bridgeCover={node:this.elements.layers.bridgeCover.rect(i,u).move(n,0).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.frets=[];for(var m=0;m<25;m+=1){var f=this.calcedParams.origin.y+this.calcedParams.fretSpacing*m;this.elements.frets[m]={node:this.drawLine(this.elements.layers.frets,this.calcedParams.origin.x,f,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-1),f).stroke({width:this.params.fretsWidth,color:this.params.fretColor||this.params.defaultColor}),label:0===m?null:this.drawText(this.elements.layers.fretLabels,g,f-this.calcedParams.fretSpacing/2-.75*this.calcedParams.fontSize,m.toString(),this.params.textColor,{opacity:1!==m||this.params.showFretsLabels?1:0})}}var p=this.calcedParams.origin.y-this.params.fretsWidth/2;this.elements.fretsCoverTop={node:this.elements.layers.fretsCover.rect(i,p).move(n,0).stroke({width:0}).fill(this.params.backgroundColor)};var b=this.params.height-this.calcedParams.height+this.params.fretsWidth,v=this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+this.params.fretsWidth/2;this.elements.fretsCoverBottom={node:this.elements.layers.fretsCover.rect(this.params.width,b).move(0,v).stroke({width:0}).fill(this.params.backgroundColor)},this.elements.fretsLabelCoverTop={node:this.elements.layers.fretLabelsCover.rect(s,o+this.calcedParams.fontSize/2.5).stroke({width:0}).fill(a)},this.elements.fretsLabelCoverBottom={node:this.elements.layers.fretLabelsCover.rect(s,o+this.calcedParams.fontSize).move(0,v-1.3*this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.params.showFretsLabels||(this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(s,o).move(0,this.calcedParams.origin.y+2*this.calcedParams.fontSize).stroke({width:0}).fill(r)},this.elements.fretsLabelCoverSide={node:this.elements.layers.fretLabelsCover.rect(s,this.calcedParams.height).move(0,this.calcedParams.origin.y+o).stroke({width:0}).fill(this.params.backgroundColor)}),this.elements.strings=[];for(var j=0;j<this.params.numOfStrings;j+=1)this.elements.strings[j]={node:this.drawLine(this.elements.layers.strings,this.calcedParams.origin.x+this.calcedParams.stringSpacing*j,this.calcedParams.origin.y,this.calcedParams.origin.x+this.calcedParams.stringSpacing*j,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets).stroke({width:this.params.stringWidth,color:this.params.stringColor||this.params.defaultColor}),label:this.drawText(this.elements.layers.stringsLabels,this.calcedParams.origin.x+this.calcedParams.stringSpacing*j,this.calcedParams.origin.y+this.calcedParams.fretSpacing*this.params.numOfFrets+10,this.params.tuning[j],this.params.textColor,{opacity:this.params.showTuning?1:0})};this.elements.fingers=[],this.elements.barres=[];for(var y=1;y<5;y+=1){var P=this.getFingerBasePosition(y),O=Object(d.a)(P,2),S=O[0],x=O[1],C="barre"+y;this.elements.layers[C]=this.elements.layers.barres.group().attr({id:C}).opacity(0),this.elements.barres[y]={node:this.drawLine(this.elements.layers[C],S+this.calcedParams.stringSpacing/4,x+this.calcedParams.fretSpacing/4,S+this.calcedParams.stringSpacing/4,x+this.calcedParams.fretSpacing/4).stroke({width:this.calcedParams.fretSpacing/2,color:this.params.fingersColor||this.params.defaultColor,linecap:"round"}),label:null};var w="finger"+y;this.elements.layers[w]=this.elements.layers.fingers.group().attr({id:w}).opacity(0),this.elements.fingers[y]={node:this.drawCircle(this.elements.layers[w],this.calcedParams.fretSpacing/2,S,x).fill(this.params.fingersColor||this.params.defaultColor),label:this.drawText(this.elements.layers[w],S+this.calcedParams.fretSpacing/3.9,this.calcedParams.origin.y+this.calcedParams.fretSpacing*(y-1)+this.calcedParams.fretSpacing/3.2,y.toString(),this.params.fingersLabelColor,{size:this.calcedParams.fretSpacing/3.4,opacity:this.params.showFingerLabels?1:0})}}this.params.forcePosition&&this.params.forcePosition>1&&(this.elements.fingersTopCoer={node:this.elements.layers.stringMarkings.rect(this.params.width,p).move(0,0).stroke({width:0}).fill(a)}),this.elements.openStringMarkins=[],this.elements.mutedStringMarkings=[];for(var k=1;k<=this.params.numOfStrings;k+=1){var F="openStringMarking"+k;this.elements.layers[F]=this.elements.layers.stringMarkings.group().attr({id:F}).opacity(0),this.elements.openStringMarkins[k]={node:this.drawCircle(this.elements.layers[F],this.calcedParams.fretSpacing/3,this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1)-this.calcedParams.fretSpacing/6,this.getOpenStringMarkingBaseYPosition()).stroke(this.params.defaultColor).fill(this.params.backgroundColor),label:this.drawText(this.elements.layers[F],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1),this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.95*this.calcedParams.fretSpacing,this.params.tuning[k-1],this.params.defaultColor,{size:this.calcedParams.fretSpacing/5,opacity:this.params.showOpenStringsLabels?1:0})};var T="mutedStringMarking"+k;this.elements.layers[T]=this.elements.layers.stringMarkings.group().attr({id:T}).opacity(0),this.elements.mutedStringMarkings[k]={node:null,label:this.drawText(this.elements.layers[T],this.calcedParams.origin.x+this.calcedParams.stringSpacing*(k-1),this.getMutedStringMarkingBaseYPosition(),"X",this.params.defaultColor,{size:this.calcedParams.fretSpacing/3})}}this.elements.stringMarkingCover={node:this.elements.layers.stringMarkings.rect(this.params.width,this.calcedParams.origin.y-.75*this.calcedParams.stringSpacing).stroke({width:0}).fill(this.params.backgroundColor)},this.moveDiagramToFret(this.params.forcePosition||0),this.params.debugMode&&this.printParams()}},{key:"getOpenStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-this.calcedParams.fretSpacing}},{key:"getMutedStringMarkingBaseYPosition",value:function(){return this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-1.05*this.calcedParams.fretSpacing}},{key:"getFingerBasePosition",value:function(t){return[this.calcedParams.origin.x+this.calcedParams.stringSpacing*(this.params.numOfStrings-.5),this.calcedParams.origin.y+this.calcedParams.fretSpacing*(t-1)+this.calcedParams.fretSpacing/4]}},{key:"getFingerChordPosition",value:function(t,e){var a=e.string,r=e.fret,i=Array.isArray(a)?a[0]:a,n=void 0!==this.params.forcePosition&&!isNaN(this.params.forcePosition),s=t<=1?0:1-t,o=this.params.forcePosition<=1?0:1-this.params.forcePosition,c=n?o:s;console.log(c);var l,d=this.calcedParams.origin.x+(this.params.numOfStrings-i-1.25/this.params.numOfFrets)*this.calcedParams.stringSpacing,h=this.calcedParams.origin.y+(r+c-.75)*this.calcedParams.fretSpacing;return Array.isArray(a)&&a[1]&&(l=this.calcedParams.stringSpacing*(a[0]-a[1])+this.calcedParams.stringSpacing/4),[d,h,l]}},{key:"moveDiagramToFret",value:function(t,e){var a=25-this.params.numOfFrets,r=t-1;if(r>a||r<0)console.error("Fret number should be between 1 to ".concat(a));else{var i=this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth,n=this.calcedParams.origin.y-.9*this.calcedParams.fontSize;e?(this.elements.layers.bridge.animate(this.calcedParams.animationDuration).y(i-this.calcedParams.fretSpacing*r),this.elements.layers.frets.animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*r),this.elements.layers.fretLabels.animate(this.calcedParams.animationDuration).y(n-this.calcedParams.fretSpacing*r)):(this.elements.layers.bridge.y(i-this.calcedParams.fretSpacing*r),this.elements.layers.frets.y(this.calcedParams.origin.y-this.calcedParams.fretSpacing*r),this.elements.layers.fretLabels.y(n-this.calcedParams.fretSpacing*r))}}},{key:"drawChord",value:function(t,e){var a=this;console.log(t),(void 0===this.params.forcePosition||isNaN(this.params.forcePosition))&&this.moveDiagramToFret(t.startFret,e);for(var r=function(r){var i=t.fingers.find((function(t){return t.index===r}));if(i){var n=a.getFingerChordPosition(t.startFret,i),s=Object(d.a)(n,3),o=s[0],c=s[1],l=s[2];e?(a.elements.layers["finger"+r].animate(a.calcedParams.animationDuration).move(o,c).opacity(1),l?(a.elements.layers["barre"+r].animate(a.calcedParams.animationDuration).move(o+a.calcedParams.stringSpacing/4,c+a.calcedParams.fretSpacing/4).opacity(1),a.elements.barres[r].node.animate(a.calcedParams.animationDuration).attr({x1:o+l})):(a.elements.layers["barre"+r].animate(a.calcedParams.animationDuration).move(o,c+a.calcedParams.fretSpacing/4).opacity(1),a.elements.barres[r].node.animate(a.calcedParams.animationDuration).attr({x1:o+a.calcedParams.fretSpacing/4,x2:o+a.calcedParams.fretSpacing/4}))):(a.elements.layers["finger"+r].move(o,c).opacity(1),l&&(a.elements.layers["barre"+r].move(o+a.calcedParams.stringSpacing/4,c+a.calcedParams.fretSpacing/4).opacity(1),a.elements.barres[r].node.attr({x1:o+l})))}else{var h=a.getFingerBasePosition(r),g=Object(d.a)(h,2),u=g[0],m=g[1];e?(a.elements.layers["finger"+r].animate(a.calcedParams.animationDuration).move(u,m).opacity(0),a.elements.layers["barre"+r].animate(a.calcedParams.animationDuration).move(u+a.calcedParams.stringSpacing/4,m+a.calcedParams.fretSpacing/4).opacity(0)):(a.elements.layers["finger"+r].move(u,m).opacity(0),a.elements.layers["barre"+r].move(u+a.calcedParams.stringSpacing/4,m+a.calcedParams.fretSpacing/4).opacity(0))}},i=1;i<5;i++)r(i);for(var n=1;n<=this.params.numOfStrings;n++)t.mutedStrings.includes(this.params.numOfStrings-n+1)?e?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["mutedStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.53*this.calcedParams.fretSpacing).opacity(1):e?this.elements.layers["mutedStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getMutedStringMarkingBaseYPosition()).opacity(0):this.elements.layers["mutedStringMarking"+n].y(this.getMutedStringMarkingBaseYPosition()).opacity(0),t.openStrings.includes(this.params.numOfStrings-n+1)?e?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):this.elements.layers["openStringMarking"+n].y(this.calcedParams.origin.y-this.calcedParams.bridgeStrokeWidth-.5*this.calcedParams.fretSpacing).opacity(1):e?this.elements.layers["openStringMarking"+n].animate(this.calcedParams.animationDuration).y(this.getOpenStringMarkingBaseYPosition()).opacity(0):this.elements.layers["openStringMarking"+n].y(this.getOpenStringMarkingBaseYPosition()).opacity(0);this.moveOldTitle(this.currentTitle),this.currentTitle=this.currentTitle%2+1,this.drawChordTitle(t.title,this.currentTitle,e)}},{key:"moveOldTitle",value:function(t,e){var a=this;e?this.elements.layers["chordTitle"+t].animate(this.calcedParams.animationDuration/2).x(-this.calcedParams.width/4).opacity(0):this.elements.layers["chordTitle"+t].x(-this.calcedParams.width/4).opacity(0),setTimeout((function(){a.elements.layers["chordTitle"+t].opacity(1).x(0).clear()}),this.calcedParams.animationDuration/2)}},{key:"drawChordTitle",value:function(t,e,a){this.elements.layers["chordTitle"+e].opacity(1),a?(this.elements["chordTitle"+e]=this.drawText(this.elements.layers["chordTitle"+e],this.params.width,this.calcedParams.origin.y/5,t,this.params.defaultColor,{size:3*this.calcedParams.fontSize}).attr({opacity:0}),this.elements["chordTitle"+e].animate(this.calcedParams.animationDuration/2).x(this.params.width/2-this.elements["chordTitle"+e].length()/2).attr({opacity:1})):this.elements["chordTitle"+e]=this.drawText(this.elements.layers["chordTitle"+e],this.params.width/2,this.calcedParams.origin.y/5,t,this.params.defaultColor,{size:3*this.calcedParams.fontSize})}}]),t}(),T=a(142),L=function(t,e){var a=Array.isArray(t.string)?t.string[0]:t.string,r=Array.isArray(e.string)?e.string[0]:e.string;return t.fret===e.fret?r-a:t.fret-e.fret};var B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{string:t,title:t,availablePositions:[],selectedPosition:1,chords:[]}};function M(t){var e=Object(T.findGuitarChord)(t);if(!e)return B(t);var a=e.fingerings.map((function(e){return function(t,e){if(!e)return function(){return{title:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",fingers:[],startFret:0,mutedStrings:[],openStrings:[]}}(t);var a=e.positions,r=e.barre,i=[],n=[1,2,3,4,5,6],s=[],o=null,c=null,d=0;return a.reverse().forEach((function(t){var e=t.fret,a=t.stringIndex;(0===d||0!==e&&d>e)&&(d=e);var l=6-a;r&&r.fret===e&&!o&&(c=r.fret,l=o=[6-r.stringIndices[0],6-r.stringIndices[r.stringIndices.length-1]]),0===e?i.push(6-a):s.push({index:0,string:l,fret:e}),n.includes(6-a)&&n.splice(n.indexOf(6-a),1)})),{title:t,fingers:s.filter((function(t){return!o||c!==t.fret||Array.isArray(t.string)&&c===t.fret&&o[0]===t.string[0]})).sort(L).map((function(t,e){return Object(l.a)(Object(l.a)({},t),{},{index:e+1})})),startFret:1e3===d?1:d,mutedStrings:n,openStrings:i}}(t,e)}));return{string:t,title:t,availablePositions:e.fingerings.map((function(t,e){return e+1})),selectedPosition:1,chords:a}}function D(t){return t.map((function(t){return M(t)}))}var W,z,A,I,V=a(296),E=g.a.div(W||(W=Object(h.a)(["\n  padding: 20px;\n  display: flex;\n  gap: 20px;\n  border-radius: 20px;\n  border: 1px solid gray;\n  margin: 20px;\n  position: relative;\n"]))),Y=g.a.div(z||(z=Object(h.a)(["\n  position: absolute;\n  top: -10px;\n  background-color: gray;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 0.6em;\n"]))),N=Object(g.a)(p.a)(A||(A=Object(h.a)(["\n  flex-grow: 1;\n"]))),G=Object(g.a)(V.a)(I||(I=Object(h.a)(["\n  width: ",";\n"])),(function(t){return t.width}));var H,R,U,q,J=function(t){var e=Object(n.useState)(t.chordConfiguration),a=Object(d.a)(e,2),r=a[0],i=a[1];return Object(b.jsxs)(E,{children:[Object(b.jsx)(Y,{children:t.index+1}),Object(b.jsx)(N,{label:"Chord",variant:"standard",value:r.title,onChange:function(t){i(M(t.target.value))},onBlur:function(){return t.onChange(r,t.index)},helperText:"Changing this value will reset the other fields"}),Object(b.jsx)(G,{width:"50px",options:r.availablePositions,value:r.selectedPosition,renderInput:function(t){return Object(b.jsx)(p.a,Object(l.a)(Object(l.a)({},t),{},{label:"Position",variant:"standard"}))}})]})},X=g.a.button(H||(H=Object(h.a)(["\n  padding: 5px;\n  align-self: flex-end;\n  background-color: #ffffff;\n"]))),Z=g.a.div(R||(R=Object(h.a)(["\n  position: sticky;\n  bottom: 0;\n  background: linear-gradient(to bottom, transparent, #eeeeee 30%);\n  padding: 30px 20px 20px;\n  display: flex;\n  justify-content: flex-end;\n"]))),K=g.a.div(U||(U=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n"]))),Q=Object(g.a)(p.a)(q||(q=Object(h.a)(["\n  background-color: rgba(25, 118, 210, 0.1);\n"])));var $,_,tt,et=function(t){var e=function(e,a){var r=Object(P.a)(t.chordsConfigurations);r[a]=e,t.setChordsConfigurations(r)},a=function(e){var a=Object(P.a)(t.chordsConfigurations);a.splice(e,1),t.setChordsConfigurations(a)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(K,{children:Object(b.jsx)(Q,{label:"Chord Sequence Text Input",value:t.chordsConfigurations.map((function(t){return t.title})).join(" "),onChange:function(e){var a=""===e.target.value?[""]:e.target.value.replace("\n"," ").split(" ");t.setChordsConfigurations(D(a))},multiline:!0})}),t.chordsConfigurations.map((function(t,r){return Object(b.jsx)(J,{index:r,chordConfiguration:t,onChange:e,removeChord:a},r)})),Object(b.jsx)(Z,{children:Object(b.jsx)(X,{onClick:function(){t.setChordsConfigurations([].concat(Object(P.a)(t.chordsConfigurations),[B()]))},children:"+Add Chord"})})]})},at=a(299),rt=a(304),it=a(303),nt=g.a.div($||($=Object(h.a)(["\n  background-color: #eeeeee;\n  flex-grow: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow-y: auto;\n"])),(function(t){return t.hidden?0:1})),st=Object(g.a)(it.a)(_||(_=Object(h.a)(["\n  padding: 0;\n  width: 100%;\n"])));function ot(t){var e=t.children,a=t.value,r=t.index;return Object(b.jsx)(nt,{role:"tabpanel",hidden:a!==r,children:a===r&&Object(b.jsx)(st,{children:e})})}var ct=Object(g.a)(it.a)(tt||(tt=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"])));var lt,dt=function(t){var e=t.tabs,a=s.a.useState(0),r=Object(d.a)(a,2),i=r[0],n=r[1];return Object(b.jsxs)(ct,{children:[Object(b.jsx)(it.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(b.jsx)(at.a,{variant:"fullWidth",value:i,onChange:function(t,e){n(e)},children:e.map((function(t,e){return Object(b.jsx)(rt.a,{label:t.title},e)}))})}),e.map((function(t,e){return Object(b.jsx)(ot,{value:i,index:e,children:t.content},e)}))]})},ht=g.a.div(lt||(lt=Object(h.a)(["\n  height: 100%;\n  width: 30vw;\n"])));var gt,ut,mt,ft=function(t){return Object(b.jsx)(ht,{children:Object(b.jsx)(dt,{tabs:[{title:"Chords Sequencer",content:Object(b.jsx)(et,{chordsConfigurations:t.chords,setChordsConfigurations:t.setChords})},{title:"Diagram Configuration",content:Object(b.jsx)(y,{diagramConfiguration:t.diagramConfiguration,setDiagramConfiguration:t.setDiagramConfiguration})}]})})},pt=a(302),bt=g.a.div(gt||(gt=Object(h.a)(["\n  height: 100%;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),vt=g.a.div(ut||(ut=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  padding: 20px;\n"]))),jt=g.a.div(mt||(mt=Object(h.a)(["\n  ","\n"])),(function(t){return t.debugMode?"border: 1px solid red;":null}));var yt=function(t){var e=Object(n.useRef)(null),a=Object(n.useRef)(null),r=Object(n.useState)(0),i=Object(d.a)(r,2),s=i[0],o=i[1],c=t.chords[s];Object(n.useEffect)((function(){e.current&&(e.current.innerHTML="",a.current=new F("#main-chord-diagram-wrapper",t.diagramConfiguration)),a.current&&a.current.drawBaseDiagram()}),[t.diagramConfiguration]),Object(n.useEffect)((function(){null!==a.current&&c&&a.current.drawChord(c,!0)}),[c]);var l=function(e){s+e<0?o(t.chords.length-1):s+e===t.chords.length?o(0):o(s+e)};return Object(b.jsxs)(bt,{children:[Object(b.jsx)(jt,{id:"main-chord-diagram-wrapper",ref:e,debugMode:t.diagramConfiguration.debugMode}),Object(b.jsxs)(vt,{children:[Object(b.jsx)(pt.a,{onClick:function(){return l(-1)},children:"<-- Previous Chord"}),Object(b.jsx)(pt.a,{onClick:function(){return l(1)},children:"Next Chord --\x3e"})]})]})};var Pt,Ot=function(t){var e=function(t){for(var e=0,a=[];e<t.length;){var r=t[e];if("|"!==r)if(/\s/.test(r))e++;else if(":"!==r){"."===r&&a.push({type:"dot",value:"."});var i=/[a-zA-Z0-9#-+()]/i;if(!i.test(r))throw new TypeError("I dont know what this character is: "+r);for(var n="";i.test(r);)n+=r,r=t[++e];a.push({type:"chord",value:n})}else e++;else"|"===t[e+1]?(a.push({type:"double barline",value:"||"}),e++):a.push({type:"barline",value:"|"}),e++}return a}(t),a=function(t){var e=0;function a(){var r=t[e];if("chord"===r.type)return e++,{type:"chord",value:r.value};if("double barline"===r.type){var i={type:"Section",content:[]};for(r=t[++e];"double barline"!==r.type;)i.content.push(a()),r=t[e];return e++,i}if("barline"===r.type){r=t[++e];for(var n={type:"bar",chords:[]};"barline"!==r.type;)n.chords.push(a()),r=t[e];return t[e+1]||++e,n}throw new TypeError("Couldn'd recognize token type \"".concat(r.type,'""'))}for(var r={type:"Chart",body:[]};e<t.length;)r.body.push(a());return r}(e);return console.log(a),a.body.filter((function(t){return"bar"===t.type})).flatMap((function(t){return t.chords.map((function(t){return t.value}))}))},St=a(143),xt=a.n(St),Ct=g.a.div(Pt||(Pt=Object(h.a)(["\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n"])));var wt=function(){var t=Object(n.useState)(D(["C","Cmaj7","C7","F","F/E","D","G","Amin","A-maj7","Am7","A-6","F","Eb","G","C"])),e=Object(d.a)(t,2),a=e[0],r=e[1];try{Ot("|"+a.join(" ")+"|").map((function(t){return xt()(t,{pascalCase:!0})}))}catch(h){console.error("can't parse chords")}var i=Object(n.useState)(Object(l.a)(Object(l.a)({},k),{},{debugMode:!1})),s=Object(d.a)(i,2),o=s[0],c=s[1];return Object(b.jsxs)(Ct,{children:[Object(b.jsx)(ft,{chords:a,setChords:r,diagramConfiguration:o,setDiagramConfiguration:c}),Object(b.jsx)(yt,{diagramConfiguration:o,chords:a.map((function(t){return t.chords[t.selectedPosition-1]}))})]})},kt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,306)).then((function(e){var a=e.getCLS,r=e.getFID,i=e.getFCP,n=e.getLCP,s=e.getTTFB;a(t),r(t),i(t),n(t),s(t)}))};a(241),a(242),a(243),a(244);c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(wt,{})}),document.getElementById("root")),kt()}},[[245,1,2]]]);
//# sourceMappingURL=main.fe02b2f6.chunk.js.map